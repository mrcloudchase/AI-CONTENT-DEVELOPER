{
  "data": {
    "content": "## Configure workload identity settings on the Kubernetes cluster\n\n The API server on the Kubernetes cluster needs to be configured to issue service account tokens that include the publicly accessible OIDC issuer URL (so that Entra knows where to find the public keys to validate the token).\n\nTo configure workload identity settings on Ubuntu Linux with K3s, follow the below steps to complete the configuration:  \n\n1. Create k3s config file.\n1. Edit `/etc/rancher/k3s/config.yaml` to add these settings:\n\n   ```yml\n      `kube-apiserver-arg:  \n        - 'service-account-issuer=${OIDC_ISSUER}'\n        - 'service-account-max-token-expiration=24h'`\n   ```\n\n1. Save the config.yaml.\n1. Restart the k3s API server using the command `systemctl restart k3s`.\n\n   We recommend rotating service account keys frequently. For more information, see [Service-Account Issuer Key Rotation](https://docs.k3s.io/cli/certificate#service-account-issuer-key-rotation).",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/workload-identity.md",
    "heading_path": [
      "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "Configure workload identity settings on the Kubernetes cluster"
    ],
    "section_level": 2,
    "chunk_index": 12,
    "frontmatter": {
      "title": "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "ms.date": "11/19/2024",
      "ms.topic": "how-to",
      "ms.custom": [
        "ignite-2024"
      ],
      "description": "Workload identity federation can be used with Azure Arc-enabled Kubernetes clusters."
    },
    "embedding_content": "Document: Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview) | Topic: how-to | Description: Workload identity federation can be used with Azure Arc-enabled Kubernetes clusters. | Section: Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview) > Configure workload identity settings on the Kubernetes cluster | ## Configure workload identity settings on the Kubernetes cluster\n\n The API server on the Kubernetes cluster needs to be configured to issue service account tokens that include the publicly accessible OIDC issuer URL (so that Entra knows where to find the public keys to validate the token).\n\nTo configure workload identity settings on Ubuntu Linux with K3s, follow the below steps to complete the configuration:  \n\n1. Create k3s config file.\n1. Edit `/etc/rancher/k3s/config.yaml` to add these settings:\n\n   ```yml\n      `kube-apiserver-arg:  \n        - 'service-account-issuer=${OIDC_ISSUER}'\n        - 'service-account-max-token-expiration=24h'`\n   ```\n\n1. Save the config.yaml.\n1. Restart the k3s API server using the command `systemctl restart k3s`.\n\n   We recommend rotating service account keys frequently. For more information, see [Service-Account Issuer Key Rotation](https://docs.k3s.io/cli/certificate#service-account-issuer-key-rotation).",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "815ce1f8a6f6717f4bd9b8d13b970eb27525a3fcddd581a5748e4b012867f4d3",
    "file_id": "279b57ff27c75b76169d4f92b4992546aac9bbc96cd6d95960fa718282fef615",
    "chunk_id": "8ee52a63953ecbee247a4b91a7902deed4f0d78a28e70aef551a89444e9eee6e",
    "prev_chunk_id": "7bd5b00fd8d520f3ab8ed2500bb5214d616f023ee9b6649248626c35143bd77a",
    "next_chunk_id": "d03582a352b8eff03b53a7482c7815fb03c86c14c47bf0250a7866bca8e3d5b6",
    "parent_heading_chunk_id": "7b962b56c965f6ed8b9d1ac2ad3261efc7654524565690860a37171ea7275bb8",
    "total_chunks_in_file": 15
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/workload-identity.md",
    "section": [
      "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "Configure workload identity settings on the Kubernetes cluster"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:19.764040"
}