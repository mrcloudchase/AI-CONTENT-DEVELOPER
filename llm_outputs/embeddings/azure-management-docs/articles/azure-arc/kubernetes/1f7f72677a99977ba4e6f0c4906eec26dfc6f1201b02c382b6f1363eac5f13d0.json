{
  "data": {
    "content": "## Use Conditional Access with Microsoft Entra ID\n\nWhen you're integrating Microsoft Entra ID with your Azure Arc-enabled Kubernetes cluster, you can also use [Conditional Access](/azure/active-directory/conditional-access/overview) to control access to your cluster.\n\n> [!NOTE]\n> [Microsoft Entra Conditional Access](/azure/active-directory/conditional-access/overview) is a Microsoft Entra ID P2 capability. For more information about Microsoft Entra ID SKUs, see the [pricing guide](https://www.microsoft.com/security/business/microsoft-entra-pricing).\n\nTo create an example Conditional Access policy to use with the cluster:\n\n1. At the top of the Azure portal, search for and select **Microsoft Entra ID**.\n1. In the service menu, under **Manage**, select **Enterprise applications**.\n1. In the service menu, under **Security**, select **Conditional Access**.\n1. In the service menu, select **Policies**. Then select **Create new policy**.\n1. Enter a name for the policy, such as `arc-k8s-policy`.\n1. Under **Assignments**, select the current value under **Users or workload identities**. Then, under **What does this policy apply to?**, verify that **Users and groups** is selected.\n1. Under **Include**, choose **Select users and groups**. Then choose the users and groups where you want to apply the policy. For this example, choose the same Microsoft Entra group that has administrative access to your cluster.\n1. Select the current value under **Cloud apps or actions**. Then, under **Select what this policy applies to**, verify that **Cloud apps** is selected.\n1. Under **Include**, choose **Select resources**. Then search for and select the server application that you created earlier.\n1. Under **Access controls**, select the current value under **Grant**. Then, select **Grant access**.\n1. Check the box for **Require device to be marked as compliant**, then select **Select**.\n1. Under **Enable policy**, select **On**.\n1. To apply the Conditional Access policy, select **Create**.\n\nAccess the cluster again. For example, run the `kubectl get nodes` command to view nodes in the cluster:\n\n```console\nkubectl get nodes\n```\n\nTo confirm that the policy is applied correctly, follow the instructions to sign in again. An error message states that you're successfully logged in, but your admin requires the device that's requesting access to be managed by Microsoft Entra ID in order to access the resource. Follow these steps to view more details:\n\n1. In the Azure portal, go to **Microsoft Entra ID**.\n1. In the service menu, under **Manage**, select **Enterprise applications**.\n1. In the service menu, under **Activity**, select **Sign-in logs**.\n1. Select the entry at the top that shows **Failed** for **Status** and **Success** for **Conditional Access**. Then, under **Details**, select **Conditional Access.** You'll see the Conditional Access policy that you created, requiring that your device must be compliant.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/azure-rbac.md",
    "heading_path": [
      "Use Azure RBAC on Azure Arc-enabled Kubernetes clusters",
      "Use Conditional Access with Microsoft Entra ID"
    ],
    "section_level": 2,
    "chunk_index": 14,
    "frontmatter": {
      "title": "Azure RBAC on Azure Arc-enabled Kubernetes clusters",
      "ms.date": "02/25/2025",
      "ms.topic": "how-to",
      "ms.custom": "devx-track-azurecli",
      "description": "Use Azure RBAC for authorization checks on Azure Arc-enabled Kubernetes clusters."
    },
    "embedding_content": "Document: Azure RBAC on Azure Arc-enabled Kubernetes clusters | Topic: how-to | Description: Use Azure RBAC for authorization checks on Azure Arc-enabled Kubernetes clusters. | Section: Use Azure RBAC on Azure Arc-enabled Kubernetes clusters > Use Conditional Access with Microsoft Entra ID | ## Use Conditional Access with Microsoft Entra ID\n\nWhen you're integrating Microsoft Entra ID with your Azure Arc-enabled Kubernetes cluster, you can also use [Conditional Access](/azure/active-directory/conditional-access/overview) to control access to your cluster.\n\n> [!NOTE]\n> [Microsoft Entra Conditional Access](/azure/active-directory/conditional-access/overview) is a Microsoft Entra ID P2 capability. For more information about Microsoft Entra ID SKUs, see the [pricing guide](https://www.microsoft.com/security/business/microsoft-entra-pricing).\n\nTo create an example Conditional Access policy to use with the cluster:\n\n1. At the top of the Azure portal, search for and select **Microsoft Entra ID**.\n1. In the service menu, under **Manage**, select **Enterprise applications**.\n1. In the service menu, under **Security**, select **Conditional Access**.\n1. In the service menu, select **Policies**. Then select **Create new policy**.\n1. Enter a name for the policy, such as `arc-k8s-policy`.\n1. Under **Assignments**, select the current value under **Users or workload identities**. Then, under **What does this policy apply to?**, verify that **Users and groups** is selected.\n1. Under **Include**, choose **Select users and groups**. Then choose the users and groups where you want to apply the policy. For this example, choose the same Microsoft Entra group that has administrative access to your cluster.\n1. Select the current value under **Cloud apps or actions**. Then, under **Select what this policy applies to**, verify that **Cloud apps** is selected.\n1. Under **Include**, choose **Select resources**. Then search for and select the server application that you created earlier.\n1. Under **Access controls**, select the current value under **Grant**. Then, select **Grant access**.\n1. Check the box for **Require device to be marked as compliant**, then select **Select**.\n1. Under **Enable policy**, select **On**.\n1. To apply the Conditional Access policy, select **Create**.\n\nAccess the cluster again. For example, run the `kubectl get nodes` command to view nodes in the cluster:\n\n```console\nkubectl get nodes\n```\n\nTo confirm that the policy is applied correctly, follow the instructions to sign in again. An error message states that you're successfully logged in, but your admin requires the device that's requesting access to be managed by Microsoft Entra ID in order to access the resource. Follow these steps to view more details:\n\n1. In the Azure portal, go to **Microsoft Entra ID**.\n1. In the service menu, under **Manage**, select **Enterprise applications**.\n1. In the service menu, under **Activity**, select **Sign-in logs**.\n1. Select the entry at the top that shows **Failed** for **Status** and **Success** for **Conditional Access**. Then, under **Details**, select **Conditional Access.** You'll see the Conditional Access policy that you created, requiring that your device must be compliant.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "2e18b21cf587b3b307fba6658d35a4167098c68dd86526a9fb1ef466e064d85d",
    "file_id": "3e8ed022d954361887bcaeb5266dfc135ba567b5c7d7df942f9288c9158f0b00",
    "chunk_id": "1f7f72677a99977ba4e6f0c4906eec26dfc6f1201b02c382b6f1363eac5f13d0",
    "prev_chunk_id": "d9eae198e5d8c0eb93b9ce11d86a0c1c26ddbb25daabd459f90e171031049aed",
    "next_chunk_id": "d485ab804c5040084092108f57b54a7748818d42b069c6173c9f2578b9c423bb",
    "parent_heading_chunk_id": "d1fff1ffc19a5647cc71fb1886ffa763ff33f859bb6dfebcf322362998632a24",
    "total_chunks_in_file": 19
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/azure-rbac.md",
    "section": [
      "Use Azure RBAC on Azure Arc-enabled Kubernetes clusters",
      "Use Conditional Access with Microsoft Entra ID"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-03T19:17:33.661497"
}