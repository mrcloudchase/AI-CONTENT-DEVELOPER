{
  "data": {
    "content": "## Create an extension instance\n\nTo create a new extension instance, use the `k8s-extension create` command. Use values from your scenario for the required parameter placeholders.\n\nThis example creates a [Container insights in Azure Monitor](extensions-release.md#container-insights-in-azure-monitor) extension instance on an Azure Arc-enabled Kubernetes cluster:\n\n```azurecli\naz k8s-extension create --name azuremonitor-containers  --extension-type Microsoft.AzureMonitor.Containers --scope cluster --cluster-name <clusterName> --resource-group <resourceGroupName> --cluster-type connectedClusters\n```\n\nCheck for output that looks like this example:\n\n```json\n{\n  \"autoUpgradeMinorVersion\": true,\n  \"configurationProtectedSettings\": null,\n  \"configurationSettings\": {\n    \"logAnalyticsWorkspaceResourceID\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx-eus\"\n  },\n  \"creationTime\": \"2021-04-02T12:13:06.7534628+00:00\",\n  \"errorInfo\": {\n    \"code\": null,\n    \"message\": null\n  },\n  \"extensionType\": \"microsoft.azuremonitor.containers\",\n  \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/demo/providers/Microsoft.Kubernetes/connectedClusters/demo/providers/Microsoft.KubernetesConfiguration/extensions/azuremonitor-containers\",\n  \"identity\": null,\n  \"installState\": \"Pending\",\n  \"lastModifiedTime\": \"2021-04-02T12:13:06.753463+00:00\",\n  \"lastStatusTime\": null,\n  \"name\": \"azuremonitor-containers\",\n  \"releaseTrain\": \"Stable\",\n  \"resourceGroup\": \"demo\",\n  \"scope\": {\n    \"cluster\": {\n      \"releaseNamespace\": \"azuremonitor-containers\"\n    },\n    \"namespace\": null\n  },\n  \"statuses\": [],\n  \"systemData\": null,\n  \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n  \"version\": \"2.8.2\"\n}\n```\n\n> [!NOTE]\n> The service doesn't retain sensitive information beyond 48 hours. If Azure Arc-enabled Kubernetes agents don't have network connectivity for more than 48 hours and can't determine whether to create an extension on the cluster, the extension transitions to a `Failed` state. In that scenario, you must run `k8s-extension create` again to create a fresh extension Azure resource.\n>\n> Only one Container insights in Azure Monitor extension is required per cluster. Before you install Container insights via an extension, you must delete any previous Helm chart installations of Container insights that don't use extensions. Before you run `az k8s-extension create`, complete the steps to [delete the Helm chart](/azure/azure-monitor/containers/kubernetes-monitoring-disable#remove-container-insights-with-helm).",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/extensions.md",
    "heading_path": [
      "Deploy and manage an Azure Arc-enabled Kubernetes cluster extension",
      "Create an extension instance"
    ],
    "section_level": 2,
    "chunk_index": 2,
    "frontmatter": {
      "title": "Deploy and manage an Azure Arc-enabled Kubernetes cluster extension",
      "ms.custom": "devx-track-azurecli",
      "ms.date": "02/08/2024",
      "ms.topic": "how-to",
      "description": "Learn how to create and manage an extension instance on an Azure Arc-enabled Kubernetes cluster."
    },
    "embedding_content": "Document: Deploy and manage an Azure Arc-enabled Kubernetes cluster extension | Topic: how-to | Description: Learn how to create and manage an extension instance on an Azure Arc-enabled Kubernetes cluster. | Section: Deploy and manage an Azure Arc-enabled Kubernetes cluster extension > Create an extension instance | ## Create an extension instance\n\nTo create a new extension instance, use the `k8s-extension create` command. Use values from your scenario for the required parameter placeholders.\n\nThis example creates a [Container insights in Azure Monitor](extensions-release.md#container-insights-in-azure-monitor) extension instance on an Azure Arc-enabled Kubernetes cluster:\n\n```azurecli\naz k8s-extension create --name azuremonitor-containers  --extension-type Microsoft.AzureMonitor.Containers --scope cluster --cluster-name <clusterName> --resource-group <resourceGroupName> --cluster-type connectedClusters\n```\n\nCheck for output that looks like this example:\n\n```json\n{\n  \"autoUpgradeMinorVersion\": true,\n  \"configurationProtectedSettings\": null,\n  \"configurationSettings\": {\n    \"logAnalyticsWorkspaceResourceID\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourcegroups/defaultresourcegroup-eus/providers/microsoft.operationalinsights/workspaces/defaultworkspace-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx-eus\"\n  },\n  \"creationTime\": \"2021-04-02T12:13:06.7534628+00:00\",\n  \"errorInfo\": {\n    \"code\": null,\n    \"message\": null\n  },\n  \"extensionType\": \"microsoft.azuremonitor.containers\",\n  \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/demo/providers/Microsoft.Kubernetes/connectedClusters/demo/providers/Microsoft.KubernetesConfiguration/extensions/azuremonitor-containers\",\n  \"identity\": null,\n  \"installState\": \"Pending\",\n  \"lastModifiedTime\": \"2021-04-02T12:13:06.753463+00:00\",\n  \"lastStatusTime\": null,\n  \"name\": \"azuremonitor-containers\",\n  \"releaseTrain\": \"Stable\",\n  \"resourceGroup\": \"demo\",\n  \"scope\": {\n    \"cluster\": {\n      \"releaseNamespace\": \"azuremonitor-containers\"\n    },\n    \"namespace\": null\n  },\n  \"statuses\": [],\n  \"systemData\": null,\n  \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n  \"version\": \"2.8.2\"\n}\n```\n\n> [!NOTE]\n> The service doesn't retain sensitive information beyond 48 hours. If Azure Arc-enabled Kubernetes agents don't have network connectivity for more than 48 hours and can't determine whether to create an extension on the cluster, the extension transitions to a `Failed` state. In that scenario, you must run `k8s-extension create` again to create a fresh extension Azure resource.\n>\n> Only one Container insights in Azure Monitor extension is required per cluster. Before you install Container insights via an extension, you must delete any previous Helm chart installations of Container insights that don't use extensions. Before you run `az k8s-extension create`, complete the steps to [delete the Helm chart](/azure/azure-monitor/containers/kubernetes-monitoring-disable#remove-container-insights-with-helm).",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "40149f9a82a2c7ec0ba835cbea81d06e808c480dfffde498d2461c5db2634ee0",
    "file_id": "2a9bde77184acf7bf3785276344cccda359daaa216f07ee6dd76f63de1a1e6e2",
    "chunk_id": "bff0fc957ecf0ebf862ed8974723a45dc5fee1a9eef960142cccffafdc3e96c4",
    "prev_chunk_id": "2af43724a867532ef339101be914a540b9518c6ad01d5d655574cd00eb7663b3",
    "next_chunk_id": "90f7d9694d02c1143a05512712b99239857c6c6f591d90a1890081cafde52a3b",
    "parent_heading_chunk_id": "d8ff6c2e657e9ff9c9345917a8135ef042d48333bf3a088836e3d34739e0bf70",
    "total_chunks_in_file": 14
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/extensions.md",
    "section": [
      "Deploy and manage an Azure Arc-enabled Kubernetes cluster extension",
      "Create an extension instance"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-03T19:17:33.836628"
}