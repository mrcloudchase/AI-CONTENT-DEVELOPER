{
  "data": {
    "content": "## Architecture\n\n:::image type=\"content\" source=\"media/conceptual-cluster-connect.png\" alt-text=\"Diagram showing cluster connect architecture.\":::\n\n[!INCLUDE [arc-jumpstart-diagram](~/reusable-content/ce-skilling/azure/includes/arc-jumpstart-diagram.md)]\n\nOn the cluster side, a reverse proxy agent called `clusterconnect-agent`, deployed as part of the agent Helm chart, makes outbound calls to the Azure Arc service to establish the session.\n\nWhen the user calls `az connectedk8s proxy`:\n\n1. The Azure Arc proxy binary is downloaded and spun up as a process on the client machine.\n1. The Azure Arc proxy fetches a `kubeconfig` file associated with the Azure Arc-enabled Kubernetes cluster on which the `az connectedk8s proxy` is invoked.\n    * The Azure Arc proxy uses the caller's Azure access token and the Azure Resource Manager ID name.\n1. The `kubeconfig` file, saved on the machine by the Azure Arc proxy, points the server URL to an endpoint on the Azure Arc proxy process.\n\nWhen a user sends a request using this `kubeconfig` file:\n\n1. The Azure Arc proxy maps the endpoint receiving the request to the Azure Arc service.\n1. The Azure Arc service then forwards the request to the `clusterconnect-agent` running on the cluster.\n1. The `clusterconnect-agent` passes on the request to the `kube-aad-proxy` component, which performs Microsoft Entra authentication on the calling entity.\n1. After Microsoft Entra authentication, `kube-aad-proxy` uses Kubernetes [user impersonation](https://kubernetes.io/docs/reference/access-authn-authz/authentication/#user-impersonation) to forward the request to the cluster's `apiserver`.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/conceptual-cluster-connect.md",
    "heading_path": [
      "Cluster connect access to Azure Arc-enabled Kubernetes clusters",
      "Architecture"
    ],
    "section_level": 2,
    "chunk_index": 1,
    "frontmatter": {
      "title": "Cluster connect access to Azure Arc-enabled Kubernetes clusters",
      "ms.date": "02/28/2024",
      "ms.topic": "concept-article",
      "description": "Cluster connect allows developers to access their Azure Arc-enabled Kubernetes clusters from anywhere for interactive development and debugging."
    },
    "embedding_content": "Document: Cluster connect access to Azure Arc-enabled Kubernetes clusters | Topic: concept-article | Description: Cluster connect allows developers to access their Azure Arc-enabled Kubernetes clusters from anywher | Section: Cluster connect access to Azure Arc-enabled Kubernetes clusters > Architecture | ## Architecture\n\n:::image type=\"content\" source=\"media/conceptual-cluster-connect.png\" alt-text=\"Diagram showing cluster connect architecture.\":::\n\n[!INCLUDE [arc-jumpstart-diagram](~/reusable-content/ce-skilling/azure/includes/arc-jumpstart-diagram.md)]\n\nOn the cluster side, a reverse proxy agent called `clusterconnect-agent`, deployed as part of the agent Helm chart, makes outbound calls to the Azure Arc service to establish the session.\n\nWhen the user calls `az connectedk8s proxy`:\n\n1. The Azure Arc proxy binary is downloaded and spun up as a process on the client machine.\n1. The Azure Arc proxy fetches a `kubeconfig` file associated with the Azure Arc-enabled Kubernetes cluster on which the `az connectedk8s proxy` is invoked.\n    * The Azure Arc proxy uses the caller's Azure access token and the Azure Resource Manager ID name.\n1. The `kubeconfig` file, saved on the machine by the Azure Arc proxy, points the server URL to an endpoint on the Azure Arc proxy process.\n\nWhen a user sends a request using this `kubeconfig` file:\n\n1. The Azure Arc proxy maps the endpoint receiving the request to the Azure Arc service.\n1. The Azure Arc service then forwards the request to the `clusterconnect-agent` running on the cluster.\n1. The `clusterconnect-agent` passes on the request to the `kube-aad-proxy` component, which performs Microsoft Entra authentication on the calling entity.\n1. After Microsoft Entra authentication, `kube-aad-proxy` uses Kubernetes [user impersonation](https://kubernetes.io/docs/reference/access-authn-authz/authentication/#user-impersonation) to forward the request to the cluster's `apiserver`.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "625f780007a5e3b5dc5a233fcef7a3c7e506cb0d2989cdd1e9b6f4f4aab29439",
    "file_id": "a14d97d40e516a1c649353bfcf78edd47f22733289b20746bf7057c0192138fc",
    "chunk_id": "de3d27334088e1e7fe995ae4e12817b27033a39f6f8a1f4432e8247fd2b95587",
    "prev_chunk_id": "4966a860af7cdaf4721ac3aaab1346dbf1eb6fc224f5935cdfbc9c319207ac12",
    "next_chunk_id": "b96659bbb7e439d494b0b29070d5bd5ac28bf4e752538618d0b1a159e5339c8a",
    "parent_heading_chunk_id": "c18503c5634d43e62dca422d59423b7cd8a2f92659d71959cb12766b35d690bb",
    "total_chunks_in_file": 3
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/conceptual-cluster-connect.md",
    "section": [
      "Cluster connect access to Azure Arc-enabled Kubernetes clusters",
      "Architecture"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:21.871922"
}