{
  "data": {
    "content": "## Validate the configuration\n\nUse the Azure CLI to validate that the configuration was successfully created.\n\n```azurecli\naz k8s-configuration flux show --name cluster-config --cluster-name AzureArcTest1 --resource-group AzureArcTest --cluster-type connectedClusters\n```\n\nThe configuration resource will be updated with compliance status, messages, and debugging information.\n\n```output\n{\n  \"complianceStatus\": {\n    \"complianceState\": \"Installed\",\n    \"lastConfigApplied\": \"2020-12-10T18:26:52.801000+00:00\",\n    \"message\": \"...\",\n    \"messageLevel\": \"Information\"\n  },\n  \"configurationProtectedSettings\": {},\n  \"enableHelmOperator\": false,\n  \"helmOperatorProperties\": {\n    \"chartValues\": \"\",\n    \"chartVersion\": \"\"\n  },\n  \"id\": \"/subscriptions/<sub id>/resourceGroups/AzureArcTest/providers/Microsoft.Kubernetes/connectedClusters/AzureArcTest1/providers/Microsoft.KubernetesConfiguration/sourceControlConfigurations/cluster-config\",\n  \"name\": \"cluster-config\",\n  \"operatorInstanceName\": \"cluster-config\",\n  \"operatorNamespace\": \"cluster-config\",\n  \"operatorParams\": \"--git-readonly\",\n  \"operatorScope\": \"cluster\",\n  \"operatorType\": \"Flux\",\n  \"provisioningState\": \"Succeeded\",\n  \"repositoryPublicKey\": \"...\",\n  \"repositoryUrl\": \"git://github.com/Azure/arc-k8s-demo.git\",\n  \"resourceGroup\": \"AzureArcTest\",\n  \"sshKnownHostsContents\": null,\n  \"systemData\": {\n    \"createdAt\": \"2020-12-01T03:58:56.175674+00:00\",\n    \"createdBy\": null,\n    \"createdByType\": null,\n    \"lastModifiedAt\": \"2020-12-10T18:30:56.881219+00:00\",\n    \"lastModifiedBy\": null,\n    \"lastModifiedByType\": null\n},\n  \"type\": \"Microsoft.KubernetesConfiguration/sourceControlConfigurations\"\n}\n```\n\nWhen a configuration is created or updated, a few things happen:\n\n1. The Azure Arc `config-agent` monitors Azure Resource Manager for new or updated configurations (`Microsoft.KubernetesConfiguration/sourceControlConfigurations`) and notices the new `Pending` configuration.\n1. The `config-agent` reads the configuration properties and creates the destination namespace.\n1. The Azure Arc `controller-manager` creates a Kubernetes service account and maps it to [ClusterRoleBinding or RoleBinding](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) for the appropriate permissions (`cluster` or `namespace` scope). It then deploys an instance of `flux`.\n1. If using the option of SSH with Flux-generated keys, `flux` generates an SSH key and logs the public key.\n1. The `config-agent` reports status back to the configuration resource in Azure.\n\nWhile the provisioning process happens, the configuration resource will move through a few state changes. Monitor progress with the [az k8s-configuration flux show](/cli/azure/k8s-configuration/flux#az-k8s-configuration-flux-show) command above:",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-connected-cluster.md",
    "heading_path": [
      "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "Validate the configuration"
    ],
    "section_level": 2,
    "chunk_index": 11,
    "frontmatter": {
      "title": "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "description": "This tutorial demonstrates applying configurations on an Azure Arc-enabled Kubernetes cluster.",
      "ms.topic": "tutorial",
      "ms.date": "11/21/2024",
      "ms.custom": "template-tutorial, devx-track-azurecli"
    },
    "embedding_content": "Document: Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster | Topic: tutorial | Description: This tutorial demonstrates applying configurations on an Azure Arc-enabled Kubernetes cluster. | Section: Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster > Validate the configuration | ## Validate the configuration\n\nUse the Azure CLI to validate that the configuration was successfully created.\n\n```azurecli\naz k8s-configuration flux show --name cluster-config --cluster-name AzureArcTest1 --resource-group AzureArcTest --cluster-type connectedClusters\n```\n\nThe configuration resource will be updated with compliance status, messages, and debugging information.\n\n```output\n{\n  \"complianceStatus\": {\n    \"complianceState\": \"Installed\",\n    \"lastConfigApplied\": \"2020-12-10T18:26:52.801000+00:00\",\n    \"message\": \"...\",\n    \"messageLevel\": \"Information\"\n  },\n  \"configurationProtectedSettings\": {},\n  \"enableHelmOperator\": false,\n  \"helmOperatorProperties\": {\n    \"chartValues\": \"\",\n    \"chartVersion\": \"\"\n  },\n  \"id\": \"/subscriptions/<sub id>/resourceGroups/AzureArcTest/providers/Microsoft.Kubernetes/connectedClusters/AzureArcTest1/providers/Microsoft.KubernetesConfiguration/sourceControlConfigurations/cluster-config\",\n  \"name\": \"cluster-config\",\n  \"operatorInstanceName\": \"cluster-config\",\n  \"operatorNamespace\": \"cluster-config\",\n  \"operatorParams\": \"--git-readonly\",\n  \"operatorScope\": \"cluster\",\n  \"operatorType\": \"Flux\",\n  \"provisioningState\": \"Succeeded\",\n  \"repositoryPublicKey\": \"...\",\n  \"repositoryUrl\": \"git://github.com/Azure/arc-k8s-demo.git\",\n  \"resourceGroup\": \"AzureArcTest\",\n  \"sshKnownHostsContents\": null,\n  \"systemData\": {\n    \"createdAt\": \"2020-12-01T03:58:56.175674+00:00\",\n    \"createdBy\": null,\n    \"createdByType\": null,\n    \"lastModifiedAt\": \"2020-12-10T18:30:56.881219+00:00\",\n    \"lastModifiedBy\": null,\n    \"lastModifiedByType\": null\n},\n  \"type\": \"Microsoft.KubernetesConfiguration/sourceControlConfigurations\"\n}\n```\n\nWhen a configuration is created or updated, a few things happen:\n\n1. The Azure Arc `config-agent` monitors Azure Resource Manager for new or updated configurations (`Microsoft.KubernetesConfiguration/sourceControlConfigurations`) and notices the new `Pending` configuration.\n1. The `config-agent` reads the configuration properties and creates the destination namespace.\n1. The Azure Arc `controller-manager` creates a Kubernetes service account and maps it to [ClusterRoleBinding or RoleBinding](https://kubernetes.io/docs/reference/access-authn-authz/rbac/) for the appropriate permissions (`cluster` or `namespace` scope). It then deploys an instance of `flux`.\n1. If using the option of SSH with Flux-generated keys, `flux` generates an SSH key and logs the public key.\n1. The `config-agent` reports status back to the configuration resource in Azure.\n\nWhile the provisioning process happens, the configuration resource will move through a few state changes. Monitor progress with the [az k8s-configuration flux show](/cli/azure/k8s-configuration/flux#az-k8s-configuration-flux-show) command above:",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "f83ac99cf78cf8adc32dc1c9ca41d1acd82bbd1af3e3296c0e92044cdb292c20",
    "file_id": "e212b2835cc03617d024b188bc5d085b9c07d06899e1e5323c87961ca1bb8d73",
    "chunk_id": "1d98b0e5daefa4e8ca77efb87c953eb9d6eb10602781e80cd3d5a958f165fcad",
    "prev_chunk_id": "b691cb031fd60bc13b19367e2948c7796fdbf937137290aa25bcadacbe1a5eb2",
    "next_chunk_id": "339dda3f2af3c223d745d0e66cb240b5bf030f695b81879e8887aaca49823512",
    "parent_heading_chunk_id": "b18f8d0e18b966b7d366328b6449bbcc8669442ec7947366d265e21aa05c4e26",
    "total_chunks_in_file": 23
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-connected-cluster.md",
    "section": [
      "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "Validate the configuration"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-03T19:17:35.252224"
}