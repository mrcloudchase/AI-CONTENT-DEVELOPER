{
  "data": {
    "content": "### ARM template\n\n1. Create a .json file using the following format. Be sure to update the `<cluster-name>` value to refer to your cluster.\n\n   ```json\n   {\n       \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n       \"contentVersion\": \"1.0.0.0\",\n       \"parameters\": {\n           \"ConnectedClusterName\": {\n               \"defaultValue\": \"<cluster-name>\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The Connected Cluster name.\"\n               }\n           },\n           \"ExtensionInstanceName\": {\n               \"defaultValue\": \"akvsecretsprovider\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The extension instance name.\"\n               }\n           },\n           \"ExtensionVersion\": {\n               \"defaultValue\": \"\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The version of the extension type.\"\n               }\n           },\n           \"ExtensionType\": {\n               \"defaultValue\": \"Microsoft.AzureKeyVaultSecretsProvider\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The extension type.\"\n               }\n           },\n           \"ReleaseTrain\": {\n               \"defaultValue\": \"stable\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The release train.\"\n               }\n           }\n       },\n       \"functions\": [],\n       \"resources\": [\n           {\n               \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n               \"apiVersion\": \"2021-09-01\",\n               \"name\": \"[parameters('ExtensionInstanceName')]\",\n               \"identity\": {\n                \"type\": \"SystemAssigned\"\n               },\n               \"properties\": {\n                   \"extensionType\": \"[parameters('ExtensionType')]\",\n                   \"releaseTrain\": \"[parameters('ReleaseTrain')]\",\n                   \"version\": \"[parameters('ExtensionVersion')]\"\n               },\n               \"scope\": \"[concat('Microsoft.Kubernetes/connectedClusters/', parameters('ConnectedClusterName'))]\"\n           }\n       ]\n   }\n   ```\n\n1. Now set the environment variables by using the following Azure CLI command:\n\n   ```azurecli-interactive\n   export TEMPLATE_FILE_NAME=<template-file-path>\n   export DEPLOYMENT_NAME=<desired-deployment-name>\n   ```\n\n1. Finally, run this Azure CLI command to install the Azure Key Vault Secrets Provider extension:\n\n   ```azurecli-interactive\n   az deployment group create --name $DEPLOYMENT_NAME --resource-group $RESOURCE_GROUP --template-file $TEMPLATE_FILE_NAME\n   ```\n\nYou should now be able to view the secret provider resources and use the extension in your cluster.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-akv-secrets-provider.md",
    "heading_path": [
      "Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster",
      "ARM template"
    ],
    "section_level": 3,
    "chunk_index": 5,
    "frontmatter": {
      "title": "Use Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "description": "Learn how to set up the Azure Key Vault Provider for Secrets Store CSI Driver interface as an extension on Azure Arc enabled Kubernetes cluster",
      "ms.custom": "devx-track-azurecli",
      "ms.date": "02/19/2025",
      "ms.topic": "how-to"
    },
    "embedding_content": "Document: Use Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters | Topic: how-to | Description: Learn how to set up the Azure Key Vault Provider for Secrets Store CSI Driver interface as an extens | Section: Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters > Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster > ARM template | ### ARM template\n\n1. Create a .json file using the following format. Be sure to update the `<cluster-name>` value to refer to your cluster.\n\n   ```json\n   {\n       \"$schema\": \"https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#\",\n       \"contentVersion\": \"1.0.0.0\",\n       \"parameters\": {\n           \"ConnectedClusterName\": {\n               \"defaultValue\": \"<cluster-name>\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The Connected Cluster name.\"\n               }\n           },\n           \"ExtensionInstanceName\": {\n               \"defaultValue\": \"akvsecretsprovider\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The extension instance name.\"\n               }\n           },\n           \"ExtensionVersion\": {\n               \"defaultValue\": \"\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The version of the extension type.\"\n               }\n           },\n           \"ExtensionType\": {\n               \"defaultValue\": \"Microsoft.AzureKeyVaultSecretsProvider\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The extension type.\"\n               }\n           },\n           \"ReleaseTrain\": {\n               \"defaultValue\": \"stable\",\n               \"type\": \"String\",\n               \"metadata\": {\n                   \"description\": \"The release train.\"\n               }\n           }\n       },\n       \"functions\": [],\n       \"resources\": [\n           {\n               \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n               \"apiVersion\": \"2021-09-01\",\n               \"name\": \"[parameters('ExtensionInstanceName')]\",\n               \"identity\": {\n                \"type\": \"SystemAssigned\"\n               },\n               \"properties\": {\n                   \"extensionType\": \"[parameters('ExtensionType')]\",\n                   \"releaseTrain\": \"[parameters('ReleaseTrain')]\",\n                   \"version\": \"[parameters('ExtensionVersion')]\"\n               },\n               \"scope\": \"[concat('Microsoft.Kubernetes/connectedClusters/', parameters('ConnectedClusterName'))]\"\n           }\n       ]\n   }\n   ```\n\n1. Now set the environment variables by using the following Azure CLI command:\n\n   ```azurecli-interactive\n   export TEMPLATE_FILE_NAME=<template-file-path>\n   export DEPLOYMENT_NAME=<desired-deployment-name>\n   ```\n\n1. Finally, run this Azure CLI command to install the Azure Key Vault Secrets Provider extension:\n\n   ```azurecli-interactive\n   az deployment group create --name $DEPLOYMENT_NAME --resource-group $RESOURCE_GROUP --template-file $TEMPLATE_FILE_NAME\n   ```\n\nYou should now be able to view the secret provider resources and use the extension in your cluster.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "48102b804c8c52b884324ea1359a2bbbd36708663c22c2cbf278347af17f0a31",
    "file_id": "3905075ae8f771091d03e1bbb7e657f419e44305e5a52521e1673109019bdc24",
    "chunk_id": "92e7cc6933f4782945b36738be79e47fd888b615ad2f12714e8449851cbfae80",
    "prev_chunk_id": "628f123637fb29017c4a6826d99c5b8555ae7acbf693e4c08774f627533c321e",
    "next_chunk_id": "688141ace198132a471be47641dbcae9f70ae7c5d120e356831884f68cadc600",
    "parent_heading_chunk_id": "9c569d045b68163f3397a717272e6cf0e6aaca2853c98d5bb170371d601d473e",
    "total_chunks_in_file": 17
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-akv-secrets-provider.md",
    "section": [
      "Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster",
      "ARM template"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:20.328252"
}