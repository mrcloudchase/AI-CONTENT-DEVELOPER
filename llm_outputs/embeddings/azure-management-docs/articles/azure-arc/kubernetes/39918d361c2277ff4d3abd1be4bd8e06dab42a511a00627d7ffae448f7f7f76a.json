{
  "data": {
    "content": "## Use Azure CLI\nUse the Azure CLI extension for `k8s-configuration` to link a connected cluster to the [example Git repository](https://github.com/Azure/arc-k8s-demo). \n1. Name this configuration `cluster-config`.\n1. Instruct the agent to deploy the operator in the `cluster-config` namespace.\n1. Give the operator `cluster-admin` permissions.\n\n    ```azurecli\n    az k8s-configuration flux create --name cluster-config --cluster-name AzureArcTest1 --resource-group AzureArcTest --operator-instance-name cluster-config --operator-namespace cluster-config --repository-url https://github.com/Azure/arc-k8s-demo --scope cluster --cluster-type connectedClusters\n    ```\n\n    ```output\n    {\n      \"complianceStatus\": {\n      \"complianceState\": \"Pending\",\n      \"lastConfigApplied\": \"0001-01-01T00:00:00\",\n      \"message\": \"{\\\"OperatorMessage\\\":null,\\\"ClusterState\\\":null}\",\n      \"messageLevel\": \"3\"\n      },\n      \"configurationProtectedSettings\": {},\n      \"enableHelmOperator\": false,\n      \"helmOperatorProperties\": null,\n      \"id\": \"/subscriptions/<sub id>/resourceGroups/<group name>/providers/Microsoft.Kubernetes/connectedClusters/<cluster name>/providers/Microsoft.KubernetesConfiguration/sourceControlConfigurations/cluster-config\",\n      \"name\": \"cluster-config\",\n      \"operatorInstanceName\": \"cluster-config\",\n      \"operatorNamespace\": \"cluster-config\",\n      \"operatorParams\": \"--git-readonly\",\n      \"operatorScope\": \"cluster\",\n      \"operatorType\": \"Flux\",\n      \"provisioningState\": \"Succeeded\",\n      \"repositoryPublicKey\": \"\",\n      \"repositoryUrl\": \"https://github.com/Azure/arc-k8s-demo\",\n      \"resourceGroup\": \"MyRG\",\n      \"sshKnownHostsContents\": \"\",\n      \"systemData\": {\n        \"createdAt\": \"2020-11-24T21:22:01.542801+00:00\",\n        \"createdBy\": null,\n        \"createdByType\": null,\n        \"lastModifiedAt\": \"2020-11-24T21:22:01.542801+00:00\",\n        \"lastModifiedBy\": null,\n        \"lastModifiedByType\": null\n      },\n      \"type\": \"Microsoft.KubernetesConfiguration/sourceControlConfigurations\"\n    }\n    ```",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-connected-cluster.md",
    "heading_path": [
      "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "Use Azure CLI"
    ],
    "section_level": 2,
    "chunk_index": 3,
    "frontmatter": {
      "title": "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "description": "This tutorial demonstrates applying configurations on an Azure Arc-enabled Kubernetes cluster.",
      "ms.topic": "tutorial",
      "ms.date": "11/21/2024",
      "ms.custom": "template-tutorial, devx-track-azurecli"
    },
    "embedding_content": "Document: Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster | Topic: tutorial | Description: This tutorial demonstrates applying configurations on an Azure Arc-enabled Kubernetes cluster. | Section: Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster > Use Azure CLI | ## Use Azure CLI\nUse the Azure CLI extension for `k8s-configuration` to link a connected cluster to the [example Git repository](https://github.com/Azure/arc-k8s-demo). \n1. Name this configuration `cluster-config`.\n1. Instruct the agent to deploy the operator in the `cluster-config` namespace.\n1. Give the operator `cluster-admin` permissions.\n\n    ```azurecli\n    az k8s-configuration flux create --name cluster-config --cluster-name AzureArcTest1 --resource-group AzureArcTest --operator-instance-name cluster-config --operator-namespace cluster-config --repository-url https://github.com/Azure/arc-k8s-demo --scope cluster --cluster-type connectedClusters\n    ```\n\n    ```output\n    {\n      \"complianceStatus\": {\n      \"complianceState\": \"Pending\",\n      \"lastConfigApplied\": \"0001-01-01T00:00:00\",\n      \"message\": \"{\\\"OperatorMessage\\\":null,\\\"ClusterState\\\":null}\",\n      \"messageLevel\": \"3\"\n      },\n      \"configurationProtectedSettings\": {},\n      \"enableHelmOperator\": false,\n      \"helmOperatorProperties\": null,\n      \"id\": \"/subscriptions/<sub id>/resourceGroups/<group name>/providers/Microsoft.Kubernetes/connectedClusters/<cluster name>/providers/Microsoft.KubernetesConfiguration/sourceControlConfigurations/cluster-config\",\n      \"name\": \"cluster-config\",\n      \"operatorInstanceName\": \"cluster-config\",\n      \"operatorNamespace\": \"cluster-config\",\n      \"operatorParams\": \"--git-readonly\",\n      \"operatorScope\": \"cluster\",\n      \"operatorType\": \"Flux\",\n      \"provisioningState\": \"Succeeded\",\n      \"repositoryPublicKey\": \"\",\n      \"repositoryUrl\": \"https://github.com/Azure/arc-k8s-demo\",\n      \"resourceGroup\": \"MyRG\",\n      \"sshKnownHostsContents\": \"\",\n      \"systemData\": {\n        \"createdAt\": \"2020-11-24T21:22:01.542801+00:00\",\n        \"createdBy\": null,\n        \"createdByType\": null,\n        \"lastModifiedAt\": \"2020-11-24T21:22:01.542801+00:00\",\n        \"lastModifiedBy\": null,\n        \"lastModifiedByType\": null\n      },\n      \"type\": \"Microsoft.KubernetesConfiguration/sourceControlConfigurations\"\n    }\n    ```",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "031631800190c559e86db40c8945c9033f053ba3ad8436ca0dfe2bfa0662c721",
    "file_id": "e212b2835cc03617d024b188bc5d085b9c07d06899e1e5323c87961ca1bb8d73",
    "chunk_id": "39918d361c2277ff4d3abd1be4bd8e06dab42a511a00627d7ffae448f7f7f76a",
    "prev_chunk_id": "4c0afea70d290e5fc65d010d14c28171d47d8ab9e5c91af95fdf03fc481a54ce",
    "next_chunk_id": "b4bfdd7df96b7013ddd8e30cd90ff62a164daba8db7312ce6801c705ba0c8225",
    "parent_heading_chunk_id": "b18f8d0e18b966b7d366328b6449bbcc8669442ec7947366d265e21aa05c4e26",
    "total_chunks_in_file": 23
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-connected-cluster.md",
    "section": [
      "Tutorial: Deploy configurations using GitOps on an Azure Arc-enabled Kubernetes cluster",
      "Use Azure CLI"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:20.620811"
}