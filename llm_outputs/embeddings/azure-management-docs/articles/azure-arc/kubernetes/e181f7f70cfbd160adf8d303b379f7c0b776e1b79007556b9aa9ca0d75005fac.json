{
  "data": {
    "content": "## Flux configurations\n\n:::image type=\"content\" source=\"media/gitops/flux2-config-install.png\" alt-text=\"Diagram showing the installation of a Flux configuration in an Azure Arc-enabled Kubernetes or AKS cluster.\" lightbox=\"media/gitops/flux2-config-install.png\":::\n\n[!INCLUDE [arc-jumpstart-diagram](~/reusable-content/ce-skilling/azure/includes/arc-jumpstart-diagram.md)]\n\nYou create Flux configuration resources (`Microsoft.KubernetesConfiguration/fluxConfigurations`) to enable GitOps management of the cluster from your Git repos, Bucket sources or Azure Blob storage. When you create a `fluxConfigurations` resource, the values you supply for the [parameters](gitops-flux2-parameters.md), such as the target Git repo, are used to create and configure the Kubernetes objects that enable the GitOps process in that cluster. To ensure data security, the `fluxConfigurations` resource data is stored encrypted at rest in an Azure Cosmos DB database by the Cluster Configuration service.\n\nThe `fluxconfig-agent` and `fluxconfig-controller` agents, installed with the `microsoft.flux` extension, manage the GitOps configuration process.  \n\n`fluxconfig-agent` is responsible for the following tasks:\n\n* Polls the Kubernetes Configuration data plane service for new or updated `fluxConfigurations` resources.\n* Creates or updates `FluxConfig` custom resources in the cluster with the configuration information.\n* Watches `FluxConfig` custom resources and pushes status changes back to the associated Azure fluxConfiguration resources.\n\n`fluxconfig-controller` is responsible for the following tasks:\n\n* Watches status updates to the Flux custom resources created by the managed `fluxConfigurations`.\n* Creates private/public key pair that exists for the lifetime of the `fluxConfigurations`. This key is used for authentication if the URL is SSH based and if the user doesn't provide their own private key during creation of the configuration.\n* Creates custom authentication secret based on user-provided private-key/http basic-auth/known-hosts/no-auth data.\n* Sets up role-based access control (service account provisioned, role binding created/assigned, role created/assigned).\n* Creates `GitRepository` or `Bucket` custom resource and `Kustomization` custom resources from the information in the `FluxConfig` custom resource.\n\nEach `fluxConfigurations` resource in Azure is associated with one Flux `GitRepository` or `Bucket` custom resource and one or more `Kustomization` custom resources in a Kubernetes cluster. When you create a `fluxConfigurations` resource, you specify the URL to the source (Git repository, Bucket or Azure Blob storage) and the sync target in the source for each `Kustomization`. You can configure dependencies between `Kustomization` custom resources to control deployment sequencing. You can also create multiple namespace-scoped `fluxConfigurations` resources on the same cluster for different applications and app teams.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/conceptual-gitops-flux2.md",
    "heading_path": [
      "Application deployments with GitOps (Flux v2) for AKS and Azure Arc-enabled Kubernetes",
      "Flux configurations"
    ],
    "section_level": 2,
    "chunk_index": 4,
    "frontmatter": {
      "title": "Application deployments with GitOps (Flux v2)",
      "description": "This article provides a conceptual overview of GitOps in Azure for use in Azure Arc-enabled Kubernetes and Azure Kubernetes Service (AKS) clusters.",
      "ms.date": "04/22/2025",
      "ms.topic": "concept-article",
      "ms.custom": "devx-track-azurecli, references-regions"
    },
    "embedding_content": "Document: Application deployments with GitOps (Flux v2) | Topic: concept-article | Description: This article provides a conceptual overview of GitOps in Azure for use in Azure Arc-enabled Kubernet | Section: Application deployments with GitOps (Flux v2) for AKS and Azure Arc-enabled Kubernetes > Flux configurations | ## Flux configurations\n\n:::image type=\"content\" source=\"media/gitops/flux2-config-install.png\" alt-text=\"Diagram showing the installation of a Flux configuration in an Azure Arc-enabled Kubernetes or AKS cluster.\" lightbox=\"media/gitops/flux2-config-install.png\":::\n\n[!INCLUDE [arc-jumpstart-diagram](~/reusable-content/ce-skilling/azure/includes/arc-jumpstart-diagram.md)]\n\nYou create Flux configuration resources (`Microsoft.KubernetesConfiguration/fluxConfigurations`) to enable GitOps management of the cluster from your Git repos, Bucket sources or Azure Blob storage. When you create a `fluxConfigurations` resource, the values you supply for the [parameters](gitops-flux2-parameters.md), such as the target Git repo, are used to create and configure the Kubernetes objects that enable the GitOps process in that cluster. To ensure data security, the `fluxConfigurations` resource data is stored encrypted at rest in an Azure Cosmos DB database by the Cluster Configuration service.\n\nThe `fluxconfig-agent` and `fluxconfig-controller` agents, installed with the `microsoft.flux` extension, manage the GitOps configuration process.  \n\n`fluxconfig-agent` is responsible for the following tasks:\n\n* Polls the Kubernetes Configuration data plane service for new or updated `fluxConfigurations` resources.\n* Creates or updates `FluxConfig` custom resources in the cluster with the configuration information.\n* Watches `FluxConfig` custom resources and pushes status changes back to the associated Azure fluxConfiguration resources.\n\n`fluxconfig-controller` is responsible for the following tasks:\n\n* Watches status updates to the Flux custom resources created by the managed `fluxConfigurations`.\n* Creates private/public key pair that exists for the lifetime of the `fluxConfigurations`. This key is used for authentication if the URL is SSH based and if the user doesn't provide their own private key during creation of the configuration.\n* Creates custom authentication secret based on user-provided private-key/http basic-auth/known-hosts/no-auth data.\n* Sets up role-based access control (service account provisioned, role binding created/assigned, role created/assigned).\n* Creates `GitRepository` or `Bucket` custom resource and `Kustomization` custom resources from the information in the `FluxConfig` custom resource.\n\nEach `fluxConfigurations` resource in Azure is associated with one Flux `GitRepository` or `Bucket` custom resource and one or more `Kustomization` custom resources in a Kubernetes cluster. When you create a `fluxConfigurations` resource, you specify the URL to the source (Git repository, Bucket or Azure Blob storage) and the sync target in the source for each `Kustomization`. You can configure dependencies between `Kustomization` custom resources to control deployment sequencing. You can also create multiple namespace-scoped `fluxConfigurations` resources on the same cluster for different applications and app teams.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "380525e533968a658ca9cc3dfd87b8e810933fd82e7ba38db625c486d8583b6c",
    "file_id": "d1c420fd47930a7e5bef901785bdb91b23493b1c6e1945a4a3b89a699dd87eb8",
    "chunk_id": "e181f7f70cfbd160adf8d303b379f7c0b776e1b79007556b9aa9ca0d75005fac",
    "prev_chunk_id": "000e7aca933b8957136b1711eb5648ffc5050033fa53c48f12fd1026c5023420",
    "next_chunk_id": "c2b0a5c3642f594631cce97e2f6de381916da3e21bfb4d35c257c63d04709247",
    "parent_heading_chunk_id": "18611c089b7bb81152e47dc9c8bc4b02fad0e274cf35f0c9dc2e4f6f521a4e6d",
    "total_chunks_in_file": 20
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/conceptual-gitops-flux2.md",
    "section": [
      "Application deployments with GitOps (Flux v2) for AKS and Azure Arc-enabled Kubernetes",
      "Flux configurations"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:20.055428"
}