{
  "data": {
    "content": "### Create a federated identity credential\n\nCreate a Kubernetes service account for the workload that needs access to secrets. Then, create a [federated identity credential](https://azure.github.io/azure-workload-identity/docs/topics/federated-identity-credential.html) to link between the managed identity, the OIDC service account issuer, and the Kubernetes Service Account.\n\n1. Create a Kubernetes Service Account that will be federated to the managed identity. Annotate it with details of the associated user-assigned managed identity.\n\n   ``` console\n   kubectl create ns ${KUBERNETES_NAMESPACE}\n   ```\n\n   ``` console\n   cat <<EOF | kubectl apply -f -\n     apiVersion: v1\n     kind: ServiceAccount\n     metadata:\n       name: ${SERVICE_ACCOUNT_NAME}\n       namespace: ${KUBERNETES_NAMESPACE}\n   EOF\n   ```\n\n1. Create a federated identity credential:\n\n   ```azurecli\n   az identity federated-credential create --name ${FEDERATED_IDENTITY_CREDENTIAL_NAME} --identity-name ${USER_ASSIGNED_IDENTITY_NAME} --resource-group ${RESOURCE_GROUP} --issuer ${SERVICE_ACCOUNT_ISSUER} --subject system:serviceaccount:${KUBERNETES_NAMESPACE}:${SERVICE_ACCOUNT_NAME}\n   ```",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/secret-store-extension.md",
    "heading_path": [
      "Use the Secret Store extension to fetch secrets for offline access in Azure Arc-enabled Kubernetes clusters",
      "Create a secret and configure an identity to access it",
      "Create a federated identity credential"
    ],
    "section_level": 3,
    "chunk_index": 10,
    "frontmatter": {
      "title": "Use the Azure Key Vault Secret Store extension to sync secrets to the Kubernetes secret store for offline access in Azure Arc-enabled Kubernetes clusters",
      "description": "The Azure Key Vault Secret Store extension for Kubernetes (\"SSE\") automatically synchronizes secrets from an Azure Key Vault to a Kubernetes cluster for offline access.",
      "ms.date": "09/26/2024",
      "ms.topic": "how-to",
      "ms.custom": "references_regions, ignite-2024"
    },
    "embedding_content": "Document: Use the Azure Key Vault Secret Store extension to sync secrets to the Kubernetes secret store for offline access in Azure Arc-enabled Kubernetes clusters | Topic: how-to | Description: The Azure Key Vault Secret Store extension for Kubernetes (\"SSE\") automatically synchronizes secrets | Section: Use the Secret Store extension to fetch secrets for offline access in Azure Arc-enabled Kubernetes clusters > Create a secret and configure an identity to access it > Create a federated identity credential | ### Create a federated identity credential\n\nCreate a Kubernetes service account for the workload that needs access to secrets. Then, create a [federated identity credential](https://azure.github.io/azure-workload-identity/docs/topics/federated-identity-credential.html) to link between the managed identity, the OIDC service account issuer, and the Kubernetes Service Account.\n\n1. Create a Kubernetes Service Account that will be federated to the managed identity. Annotate it with details of the associated user-assigned managed identity.\n\n   ``` console\n   kubectl create ns ${KUBERNETES_NAMESPACE}\n   ```\n\n   ``` console\n   cat <<EOF | kubectl apply -f -\n     apiVersion: v1\n     kind: ServiceAccount\n     metadata:\n       name: ${SERVICE_ACCOUNT_NAME}\n       namespace: ${KUBERNETES_NAMESPACE}\n   EOF\n   ```\n\n1. Create a federated identity credential:\n\n   ```azurecli\n   az identity federated-credential create --name ${FEDERATED_IDENTITY_CREDENTIAL_NAME} --identity-name ${USER_ASSIGNED_IDENTITY_NAME} --resource-group ${RESOURCE_GROUP} --issuer ${SERVICE_ACCOUNT_ISSUER} --subject system:serviceaccount:${KUBERNETES_NAMESPACE}:${SERVICE_ACCOUNT_NAME}\n   ```",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "85bda5d6c671f9f0db8b9059cdbde1e2888a392913ff2b6eae32583463bde697",
    "file_id": "5b880508d2c3419668daf37d0ffb257e9268a80b1899afb8daa2f62b08b56d1e",
    "chunk_id": "00a21c0c261043c82f57d9f091f493c603da434dd351932da7f1ed7632d1f850",
    "prev_chunk_id": "89b722180beff86b1643255dbed4a20ae56fd6063e7bc55904b2495ba1cae007",
    "next_chunk_id": "eb5717a4ae4268d78aea15a9a3a871cf515b660d70da7247f36b805b61b177ca",
    "parent_heading_chunk_id": "81b6e58e1416902a2052c80fc2ea64c380efcfa320cc07c9d67385e4331ebc1a",
    "total_chunks_in_file": 29
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/secret-store-extension.md",
    "section": [
      "Use the Secret Store extension to fetch secrets for offline access in Azure Arc-enabled Kubernetes clusters",
      "Create a secret and configure an identity to access it",
      "Create a federated identity credential"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-03T19:17:35.389384"
}