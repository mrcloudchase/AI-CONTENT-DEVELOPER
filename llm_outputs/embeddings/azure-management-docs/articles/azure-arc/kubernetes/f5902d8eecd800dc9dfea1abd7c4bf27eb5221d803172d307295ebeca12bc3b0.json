{
  "data": {
    "content": "#### Control which controllers are deployed with the Flux cluster extension\n\nFor some scenarios, you may wish to change which Flux controllers are installed with the Flux cluster extension.\n\nThe `source`, `helm`, `kustomize`, and `notification` Flux controllers are installed by default. The [`image-automation` and `image-reflector` controllers](https://fluxcd.io/docs/components/image/), used to update a Git repository when new container images are available,  must be enabled explicitly.\n\nYou can use the `k8s-extension` command to change the default options:\n\n* `--config source-controller.enabled=<true/false>` (default `true`)\n* `--config helm-controller.enabled=<true/false>` (default `true`)\n* `--config kustomize-controller.enabled=<true/false>` (default `true`)\n* `--config notification-controller.enabled=<true/false>` (default `true`)\n* `--config image-automation-controller.enabled=<true/false>` (default `false`)\n* `--config image-reflector-controller.enabled=<true/false>` (default `false`)\n\nFor instance, to disable notifications, you can set `notification-controller.enabled` to `false`.\n\nThis example command installs the `image-reflector` and `image-automation` controllers. If the Flux extension was created automatically when a Flux configuration was first created, the extension name is `flux`.\n\n```azurecli\naz k8s-extension create -g <cluster_resource_group> -c <cluster_name> -t <connectedClusters or managedClusters or provisionedClusters> --name flux --extension-type microsoft.flux --config image-automation-controller.enabled=true image-reflector-controller.enabled=true\n```",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-flux2.md",
    "heading_path": [
      "Tutorial: Deploy applications using GitOps with Flux v2",
      "Apply a Flux configuration",
      "[Azure CLI](#tab/azure-cli)",
      "Control which controllers are deployed with the Flux cluster extension"
    ],
    "section_level": 4,
    "chunk_index": 20,
    "frontmatter": {
      "title": "Tutorial: Deploy applications using GitOps with Flux v2",
      "description": "This tutorial shows how to use GitOps with Flux v2 to manage configuration and application deployment in Azure Arc and AKS clusters.",
      "ms.date": "03/26/2025",
      "ms.topic": "tutorial",
      "ms.custom": "template-tutorial, devx-track-azurecli, references_regions"
    },
    "embedding_content": "Document: Tutorial: Deploy applications using GitOps with Flux v2 | Topic: tutorial | Description: This tutorial shows how to use GitOps with Flux v2 to manage configuration and application deploymen | Section: Tutorial: Deploy applications using GitOps with Flux v2 > Apply a Flux configuration > [Azure CLI](#tab/azure-cli) > Control which controllers are deployed with the Flux cluster extension | #### Control which controllers are deployed with the Flux cluster extension\n\nFor some scenarios, you may wish to change which Flux controllers are installed with the Flux cluster extension.\n\nThe `source`, `helm`, `kustomize`, and `notification` Flux controllers are installed by default. The [`image-automation` and `image-reflector` controllers](https://fluxcd.io/docs/components/image/), used to update a Git repository when new container images are available,  must be enabled explicitly.\n\nYou can use the `k8s-extension` command to change the default options:\n\n* `--config source-controller.enabled=<true/false>` (default `true`)\n* `--config helm-controller.enabled=<true/false>` (default `true`)\n* `--config kustomize-controller.enabled=<true/false>` (default `true`)\n* `--config notification-controller.enabled=<true/false>` (default `true`)\n* `--config image-automation-controller.enabled=<true/false>` (default `false`)\n* `--config image-reflector-controller.enabled=<true/false>` (default `false`)\n\nFor instance, to disable notifications, you can set `notification-controller.enabled` to `false`.\n\nThis example command installs the `image-reflector` and `image-automation` controllers. If the Flux extension was created automatically when a Flux configuration was first created, the extension name is `flux`.\n\n```azurecli\naz k8s-extension create -g <cluster_resource_group> -c <cluster_name> -t <connectedClusters or managedClusters or provisionedClusters> --name flux --extension-type microsoft.flux --config image-automation-controller.enabled=true image-reflector-controller.enabled=true\n```",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "81564eb458f707c09b8d38febd2fe81c3642f2b6d20bcebf86f156f0ffe58aca",
    "file_id": "e86c9f8524b4e2887fafe4602021952640d48b815217386227741e43a048021a",
    "chunk_id": "f5902d8eecd800dc9dfea1abd7c4bf27eb5221d803172d307295ebeca12bc3b0",
    "prev_chunk_id": "721bd19bbe978b6534352d3d8a933829d3c9110ce0889bc8d90acebb18a8e8d2",
    "next_chunk_id": "118717a28493725ee1072fd8964c769d56d61466e71b8fabe98ab4ff9cc0ee0a",
    "parent_heading_chunk_id": "5c9458ae7fc80bdbafa6451dea0e38d02d057dc4bd24c8e304f442b0c2d02583",
    "total_chunks_in_file": 51
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-use-gitops-flux2.md",
    "section": [
      "Tutorial: Deploy applications using GitOps with Flux v2",
      "Apply a Flux configuration",
      "[Azure CLI](#tab/azure-cli)",
      "Control which controllers are deployed with the Flux cluster extension"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:19.659785"
}