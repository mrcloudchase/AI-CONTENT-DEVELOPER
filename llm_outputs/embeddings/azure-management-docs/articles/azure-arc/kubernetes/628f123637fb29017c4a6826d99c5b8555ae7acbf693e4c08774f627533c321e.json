{
  "data": {
    "content": "### Azure CLI\n\n1. Set the environment variables:\n\n   ```azurecli-interactive\n   export CLUSTER_NAME=<arc-cluster-name>\n   export RESOURCE_GROUP=<resource-group-name>\n   ```\n\n2. Install the Secrets Store CSI Driver and the Azure Key Vault Secrets Provider extension by running the following command:\n\n   ```azurecli-interactive\n   az k8s-extension create --cluster-name $CLUSTER_NAME --resource-group $RESOURCE_GROUP --cluster-type connectedClusters --extension-type Microsoft.AzureKeyVaultSecretsProvider --name akvsecretsprovider\n   ```\n\nYou should see output similar to this example. It may take several minutes before the secrets provider Helm chart is deployed to the cluster.\n\n```json\n{\n  \"aksAssignedIdentity\": null,\n  \"autoUpgradeMinorVersion\": true,\n  \"configurationProtectedSettings\": {},\n  \"configurationSettings\": {},\n  \"customLocationSettings\": null,\n  \"errorInfo\": null,\n  \"extensionType\": \"microsoft.azurekeyvaultsecretsprovider\",\n  \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/$RESOURCE_GROUP/providers/Microsoft.Kubernetes/connectedClusters/$CLUSTER_NAME/providers/Microsoft.KubernetesConfiguration/extensions/akvsecretsprovider\",\n  \"identity\": {\n    \"principalId\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n    \"tenantId\": null,\n    \"type\": \"SystemAssigned\"\n  },\n  \"location\": null,\n  \"name\": \"akvsecretsprovider\",\n  \"packageUri\": null,\n  \"provisioningState\": \"Succeeded\",\n  \"releaseTrain\": \"Stable\",\n  \"resourceGroup\": \"$RESOURCE_GROUP\",\n  \"scope\": {\n    \"cluster\": {\n      \"releaseNamespace\": \"kube-system\"\n    },\n    \"namespace\": null\n  },\n  \"statuses\": [],\n  \"systemData\": {\n    \"createdAt\": \"2022-05-12T18:35:56.552889+00:00\",\n    \"createdBy\": null,\n    \"createdByType\": null,\n    \"lastModifiedAt\": \"2022-05-12T18:35:56.552889+00:00\",\n    \"lastModifiedBy\": null,\n    \"lastModifiedByType\": null\n  },\n  \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n  \"version\": \"1.1.3\"\n}\n```",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-akv-secrets-provider.md",
    "heading_path": [
      "Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster",
      "Azure CLI"
    ],
    "section_level": 3,
    "chunk_index": 4,
    "frontmatter": {
      "title": "Use Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "description": "Learn how to set up the Azure Key Vault Provider for Secrets Store CSI Driver interface as an extension on Azure Arc enabled Kubernetes cluster",
      "ms.custom": "devx-track-azurecli",
      "ms.date": "02/19/2025",
      "ms.topic": "how-to"
    },
    "embedding_content": "Document: Use Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters | Topic: how-to | Description: Learn how to set up the Azure Key Vault Provider for Secrets Store CSI Driver interface as an extens | Section: Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters > Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster > Azure CLI | ### Azure CLI\n\n1. Set the environment variables:\n\n   ```azurecli-interactive\n   export CLUSTER_NAME=<arc-cluster-name>\n   export RESOURCE_GROUP=<resource-group-name>\n   ```\n\n2. Install the Secrets Store CSI Driver and the Azure Key Vault Secrets Provider extension by running the following command:\n\n   ```azurecli-interactive\n   az k8s-extension create --cluster-name $CLUSTER_NAME --resource-group $RESOURCE_GROUP --cluster-type connectedClusters --extension-type Microsoft.AzureKeyVaultSecretsProvider --name akvsecretsprovider\n   ```\n\nYou should see output similar to this example. It may take several minutes before the secrets provider Helm chart is deployed to the cluster.\n\n```json\n{\n  \"aksAssignedIdentity\": null,\n  \"autoUpgradeMinorVersion\": true,\n  \"configurationProtectedSettings\": {},\n  \"configurationSettings\": {},\n  \"customLocationSettings\": null,\n  \"errorInfo\": null,\n  \"extensionType\": \"microsoft.azurekeyvaultsecretsprovider\",\n  \"id\": \"/subscriptions/xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx/resourceGroups/$RESOURCE_GROUP/providers/Microsoft.Kubernetes/connectedClusters/$CLUSTER_NAME/providers/Microsoft.KubernetesConfiguration/extensions/akvsecretsprovider\",\n  \"identity\": {\n    \"principalId\": \"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\",\n    \"tenantId\": null,\n    \"type\": \"SystemAssigned\"\n  },\n  \"location\": null,\n  \"name\": \"akvsecretsprovider\",\n  \"packageUri\": null,\n  \"provisioningState\": \"Succeeded\",\n  \"releaseTrain\": \"Stable\",\n  \"resourceGroup\": \"$RESOURCE_GROUP\",\n  \"scope\": {\n    \"cluster\": {\n      \"releaseNamespace\": \"kube-system\"\n    },\n    \"namespace\": null\n  },\n  \"statuses\": [],\n  \"systemData\": {\n    \"createdAt\": \"2022-05-12T18:35:56.552889+00:00\",\n    \"createdBy\": null,\n    \"createdByType\": null,\n    \"lastModifiedAt\": \"2022-05-12T18:35:56.552889+00:00\",\n    \"lastModifiedBy\": null,\n    \"lastModifiedByType\": null\n  },\n  \"type\": \"Microsoft.KubernetesConfiguration/extensions\",\n  \"version\": \"1.1.3\"\n}\n```",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "5ef629c8f9f329d04fe4f06798d18092db5a91b58a862eb162c1bf4712ad7597",
    "file_id": "3905075ae8f771091d03e1bbb7e657f419e44305e5a52521e1673109019bdc24",
    "chunk_id": "628f123637fb29017c4a6826d99c5b8555ae7acbf693e4c08774f627533c321e",
    "prev_chunk_id": "95ba3c407c94b87817baa2e39e0867219397a44a66f8c74c92628bbedd757782",
    "next_chunk_id": "92e7cc6933f4782945b36738be79e47fd888b615ad2f12714e8449851cbfae80",
    "parent_heading_chunk_id": "9c569d045b68163f3397a717272e6cf0e6aaca2853c98d5bb170371d601d473e",
    "total_chunks_in_file": 17
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/tutorial-akv-secrets-provider.md",
    "section": [
      "Use the Azure Key Vault Secrets Provider extension to fetch secrets into Azure Arc-enabled Kubernetes clusters",
      "Install the Azure Key Vault Secrets Provider extension on an Arc-enabled Kubernetes cluster",
      "Azure CLI"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:20.324615"
}