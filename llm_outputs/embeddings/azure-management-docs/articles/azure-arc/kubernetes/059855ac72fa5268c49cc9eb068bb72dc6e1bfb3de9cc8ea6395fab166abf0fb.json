{
  "data": {
    "content": "resource fluxRuleGroup 'Microsoft.AlertsManagement/prometheusRuleGroups@2023-03-01' = {\n  name: 'fluxRuleGroup'\n  location: location\n  properties: {\n    description: 'Flux Prometheus Rule Group'\n    scopes: [\n      azureMonitorWorkspace.id\n    ]\n    enabled: true\n    interval: 'PT1M'\n    rules: [\n      {\n        alert: 'KustomizationNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"Kustomization\"}) > 0'\n        for: 'PT${kustomizationLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'Kustomization reconciliation failing for last ${kustomizationLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'Kustomization reconciliation failing for last ${kustomizationLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'HelmReleaseNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"HelmRelease\"}) > 0'\n        for: 'PT${helmReleaseLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'HelmRelease reconciliation failing for last ${helmReleaseLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'HelmRelease reconciliation failing for last ${helmReleaseLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'GitRepositoryNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"GitRepository\"}) > 0'\n        for: 'PT${gitRepositoryLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'GitRepository reconciliation failing for last ${gitRepositoryLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'GitRepository reconciliation failing for last ${gitRepositoryLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'BucketNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"Bucket\"}) > 0'\n        for: 'PT${bucketLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'Bucket reconciliation failing for last ${bucketLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'Bucket reconciliation failing for last ${bucketLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'HelmRepositoryNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"HelmRepository\"}) > 0'\n        for: 'PT${helmRepoLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'HelmRepository reconciliation failing for last ${helmRepoLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'HelmRepository reconciliation failing for last ${helmRepoLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n    ]\n  }\n}",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/monitor-gitops-flux-2.md",
    "heading_path": [
      "Monitor GitOps (Flux v2) status and activity",
      "Monitor resource consumption and reconciliations",
      "Create alerts for resource consumption and reconciliation issues"
    ],
    "section_level": 3,
    "chunk_index": 15,
    "frontmatter": {
      "title": "Monitor GitOps (Flux v2) status and activity",
      "ms.date": "02/26/2025",
      "ms.topic": "how-to",
      "description": "Learn how to monitor status, compliance, resource consumption, and reconciliation activity for GitOps with Flux v2."
    },
    "embedding_content": "Document: Monitor GitOps (Flux v2) status and activity | Topic: how-to | Description: Learn how to monitor status, compliance, resource consumption, and reconciliation activity for GitOp | Section: Monitor GitOps (Flux v2) status and activity > Monitor resource consumption and reconciliations > Create alerts for resource consumption and reconciliation issues | resource fluxRuleGroup 'Microsoft.AlertsManagement/prometheusRuleGroups@2023-03-01' = {\n  name: 'fluxRuleGroup'\n  location: location\n  properties: {\n    description: 'Flux Prometheus Rule Group'\n    scopes: [\n      azureMonitorWorkspace.id\n    ]\n    enabled: true\n    interval: 'PT1M'\n    rules: [\n      {\n        alert: 'KustomizationNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"Kustomization\"}) > 0'\n        for: 'PT${kustomizationLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'Kustomization reconciliation failing for last ${kustomizationLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'Kustomization reconciliation failing for last ${kustomizationLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'HelmReleaseNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"HelmRelease\"}) > 0'\n        for: 'PT${helmReleaseLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'HelmRelease reconciliation failing for last ${helmReleaseLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'HelmRelease reconciliation failing for last ${helmReleaseLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'GitRepositoryNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"GitRepository\"}) > 0'\n        for: 'PT${gitRepositoryLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'GitRepository reconciliation failing for last ${gitRepositoryLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'GitRepository reconciliation failing for last ${gitRepositoryLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'BucketNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"Bucket\"}) > 0'\n        for: 'PT${bucketLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'Bucket reconciliation failing for last ${bucketLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'Bucket reconciliation failing for last ${bucketLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n      {\n        alert: 'HelmRepositoryNotReady'\n        expression: 'sum by (cluster, namespace, name) (gotk_reconcile_condition{type=\"Ready\", status=\"False\", kind=\"HelmRepository\"}) > 0'\n        for: 'PT${helmRepoLookbackPeriodInMinutes}M'\n        labels: {\n          description: 'HelmRepository reconciliation failing for last ${helmRepoLookbackPeriodInMinutes} minutes.'\n        }\n        annotations: {\n          description: 'HelmRepository reconciliation failing for last ${helmRepoLookbackPeriodInMinutes} minutes.'\n        }\n        enabled: true\n        severity: 3\n        resolveConfiguration: {\n          autoResolved: true\n          timeToResolve: timeToResolveAlerts\n        }\n        actions: [\n          {\n            actionGroupId: fluxRuleActionGroup.id\n          }\n        ]\n      }\n    ]\n  }\n}",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "019a1a06fa3a16359126eaca1789e4b43bf07fe0da2bd28df0264eed1371a19e",
    "file_id": "d5cf2008aa582ba87374755e0e98b830039eec148a5d6f4688b86f3444e9902e",
    "chunk_id": "059855ac72fa5268c49cc9eb068bb72dc6e1bfb3de9cc8ea6395fab166abf0fb",
    "prev_chunk_id": "0ea7ce77fce7608dd2042ef1bf749120cbbc232b750e26aa60e616389ab97c6b",
    "next_chunk_id": "d0a6407ff4b8b6d7b08e47b9579c7fc006194dce93da6f5cfd2042d60813758b",
    "parent_heading_chunk_id": "b2142e827cd9e10093748cbee8cbcbb9514e5afe4b432ebc8659c9333c91b319",
    "total_chunks_in_file": 18
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/monitor-gitops-flux-2.md",
    "section": [
      "Monitor GitOps (Flux v2) status and activity",
      "Monitor resource consumption and reconciliations",
      "Create alerts for resource consumption and reconciliation issues"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:19.308389"
}