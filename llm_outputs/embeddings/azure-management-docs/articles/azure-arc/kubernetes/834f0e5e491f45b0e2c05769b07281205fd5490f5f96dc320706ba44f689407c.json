{
  "data": {
    "content": "## Create the federated identity credential\n\nUse the\u202f[`az identity federated-credential create`\u202fcommand](/cli/azure/identity/federated-credential#az-identity-federated-credential-create) to create the federated identity credential between the managed identity, the service account issuer, and the subject. This step establishes the trust relationship between the Kubernetes cluster and Microsoft Entra for exchanging tokens. For more information about federated identity credentials in Microsoft Entra, see\u202f[Overview of federated identity credentials in Microsoft Entra ID](/graph/api/resources/federatedidentitycredentials-overview).\n\n```azurecli\naz identity federated-credential create \\ \n    --name ${FEDERATED_IDENTITY_CREDENTIAL_NAME} \\ \n    --identity-name \"${USER_ASSIGNED_IDENTITY_NAME}\" \\ \n    --resource-group \"${RESOURCE_GROUP}\" \\ \n    --issuer \"${OIDC_ISSUER}\" \\ \n    --subject system:serviceaccount:\"${SERVICE_ACCOUNT_NAMESPACE}\":\"${SERVICE_ACCOUNT_NAME}\" \\ \n    --audience api://AzureADTokenExchange \n```\n\n> [!NOTE]\n> After the federal identity credential is added, it takes a few seconds to propagate. If a token request is made immediately after adding the federated identity credential, the request might fail until the cache is refreshed. To avoid this issue, add a slight delay in your scripts after adding the federated identity credential.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/workload-identity.md",
    "heading_path": [
      "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "Create the federated identity credential"
    ],
    "section_level": 2,
    "chunk_index": 7,
    "frontmatter": {
      "title": "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "ms.date": "11/19/2024",
      "ms.topic": "how-to",
      "ms.custom": [
        "ignite-2024"
      ],
      "description": "Workload identity federation can be used with Azure Arc-enabled Kubernetes clusters."
    },
    "embedding_content": "Document: Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview) | Topic: how-to | Description: Workload identity federation can be used with Azure Arc-enabled Kubernetes clusters. | Section: Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview) > Create the federated identity credential | ## Create the federated identity credential\n\nUse the\u202f[`az identity federated-credential create`\u202fcommand](/cli/azure/identity/federated-credential#az-identity-federated-credential-create) to create the federated identity credential between the managed identity, the service account issuer, and the subject. This step establishes the trust relationship between the Kubernetes cluster and Microsoft Entra for exchanging tokens. For more information about federated identity credentials in Microsoft Entra, see\u202f[Overview of federated identity credentials in Microsoft Entra ID](/graph/api/resources/federatedidentitycredentials-overview).\n\n```azurecli\naz identity federated-credential create \\ \n    --name ${FEDERATED_IDENTITY_CREDENTIAL_NAME} \\ \n    --identity-name \"${USER_ASSIGNED_IDENTITY_NAME}\" \\ \n    --resource-group \"${RESOURCE_GROUP}\" \\ \n    --issuer \"${OIDC_ISSUER}\" \\ \n    --subject system:serviceaccount:\"${SERVICE_ACCOUNT_NAMESPACE}\":\"${SERVICE_ACCOUNT_NAME}\" \\ \n    --audience api://AzureADTokenExchange \n```\n\n> [!NOTE]\n> After the federal identity credential is added, it takes a few seconds to propagate. If a token request is made immediately after adding the federated identity credential, the request might fail until the cache is refreshed. To avoid this issue, add a slight delay in your scripts after adding the federated identity credential.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "479c394532a6c00ba0256a1e7621463259c0dff2a8abf3bf5c259fa6ba693978",
    "file_id": "279b57ff27c75b76169d4f92b4992546aac9bbc96cd6d95960fa718282fef615",
    "chunk_id": "834f0e5e491f45b0e2c05769b07281205fd5490f5f96dc320706ba44f689407c",
    "prev_chunk_id": "c688c98a93c74ec570e8f4c3674229e6a8c1c00a2d0444d412215f9c6f20d72d",
    "next_chunk_id": "2a8bfb032ff24d1fa1d7b3209e528d0c1ceaa2d110249b8c3b68569215220222",
    "parent_heading_chunk_id": "7b962b56c965f6ed8b9d1ac2ad3261efc7654524565690860a37171ea7275bb8",
    "total_chunks_in_file": 15
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/workload-identity.md",
    "section": [
      "Deploy and configure workload identity federation in Azure Arc-enabled Kubernetes (preview)",
      "Create the federated identity credential"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:19.720073"
}