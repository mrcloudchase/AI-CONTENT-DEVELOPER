{
  "data": {
    "content": "## Local secret for authentication with source\n\nYou can use a local Kubernetes secret for authentication with a `git`, `bucket` or `azBlob` source.  The local secret must contain all of the authentication parameters needed for the source and must be created in the same namespace as the Flux configuration.\n\n| Parameter | Format | Notes |\n| ------------- | ------------- | ------------- |\n| `--local-auth-ref` `--local-ref`  | String | Local reference to a Kubernetes secret in the Flux configuration namespace to use for authentication with the source. |\n\nFor HTTPS authentication, you create a secret with the `username` and `password`:\n\n```azurecli\nkubectl create ns flux-config\nkubectl create secret generic -n flux-config my-custom-secret --from-literal=username=<my-username> --from-literal=password=<my-password-or-key>\n```\n\nFor SSH authentication, you create a secret with the `identity` and `known_hosts` fields:\n\n```azurecli\nkubectl create ns flux-config\nkubectl create secret generic -n flux-config my-custom-secret --from-file=identity=./id_rsa --from-file=known_hosts=./known_hosts\n```\n\n> [!IMPORTANT]\n> Azure DevOps [announced the deprecation of SSH-RSA](https://aka.ms/ado-ssh-rsa-deprecation) as a supported encryption method for connecting to Azure repositories using SSH. If you use SSH keys to connect to Azure repositories in Flux configurations, we recommend moving to more secure RSA-SHA2-256 or RSA-SHA2-512 keys. For more information, see [Azure DevOps SSH-RSA deprecation](tutorial-use-gitops-flux2.md#azure-devops-ssh-rsa-deprecation).\n\nFor both cases, when you create the Flux configuration, use `--local-auth-ref my-custom-secret` in place of the other authentication parameters:\n\n```azurecli\naz k8s-configuration flux create -g <cluster_resource_group> -c <cluster_name> -n <config_name> -t connectedClusters --scope cluster --namespace flux-config -u <git-repo-url> --kustomization name=kustomization1 --local-auth-ref my-custom-secret\n```\n\nLearn more about using a local Kubernetes secret with these authentication methods:\n\n* [Git repository HTTPS authentication](https://fluxcd.io/docs/components/source/gitrepositories/#https-authentication)\n* [Git repository HTTPS self-signed certificates](https://fluxcd.io/docs/components/source/gitrepositories/#https-self-signed-certificates)\n* [Git repository SSH authentication](https://fluxcd.io/docs/components/source/gitrepositories/#ssh-authentication)\n* [Bucket static authentication](https://fluxcd.io/docs/components/source/buckets/#static-authentication)\n\n> [!NOTE]\n> If you need Flux to access the source through your proxy, you must update the Azure Arc agents with the proxy settings. For more information, see [Connect using an outbound proxy server](./quickstart-connect-cluster.md#connect-using-an-outbound-proxy-server).",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/gitops-flux2-parameters.md",
    "heading_path": [
      "GitOps (Flux v2) supported parameters",
      "Local secret for authentication with source"
    ],
    "section_level": 2,
    "chunk_index": 13,
    "frontmatter": {
      "title": "GitOps (Flux v2) supported parameters",
      "description": "Understand the supported parameters for GitOps (Flux v2) in Azure for use in Azure Arc-enabled Kubernetes and Azure Kubernetes Service (AKS) clusters.",
      "ms.date": "04/30/2024",
      "ms.topic": "concept-article"
    },
    "embedding_content": "Document: GitOps (Flux v2) supported parameters | Topic: concept-article | Description: Understand the supported parameters for GitOps (Flux v2) in Azure for use in Azure Arc-enabled Kuber | Section: GitOps (Flux v2) supported parameters > Local secret for authentication with source | ## Local secret for authentication with source\n\nYou can use a local Kubernetes secret for authentication with a `git`, `bucket` or `azBlob` source.  The local secret must contain all of the authentication parameters needed for the source and must be created in the same namespace as the Flux configuration.\n\n| Parameter | Format | Notes |\n| ------------- | ------------- | ------------- |\n| `--local-auth-ref` `--local-ref`  | String | Local reference to a Kubernetes secret in the Flux configuration namespace to use for authentication with the source. |\n\nFor HTTPS authentication, you create a secret with the `username` and `password`:\n\n```azurecli\nkubectl create ns flux-config\nkubectl create secret generic -n flux-config my-custom-secret --from-literal=username=<my-username> --from-literal=password=<my-password-or-key>\n```\n\nFor SSH authentication, you create a secret with the `identity` and `known_hosts` fields:\n\n```azurecli\nkubectl create ns flux-config\nkubectl create secret generic -n flux-config my-custom-secret --from-file=identity=./id_rsa --from-file=known_hosts=./known_hosts\n```\n\n> [!IMPORTANT]\n> Azure DevOps [announced the deprecation of SSH-RSA](https://aka.ms/ado-ssh-rsa-deprecation) as a supported encryption method for connecting to Azure repositories using SSH. If you use SSH keys to connect to Azure repositories in Flux configurations, we recommend moving to more secure RSA-SHA2-256 or RSA-SHA2-512 keys. For more information, see [Azure DevOps SSH-RSA deprecation](tutorial-use-gitops-flux2.md#azure-devops-ssh-rsa-deprecation).\n\nFor both cases, when you create the Flux configuration, use `--local-auth-ref my-custom-secret` in place of the other authentication parameters:\n\n```azurecli\naz k8s-configuration flux create -g <cluster_resource_group> -c <cluster_name> -n <config_name> -t connectedClusters --scope cluster --namespace flux-config -u <git-repo-url> --kustomization name=kustomization1 --local-auth-ref my-custom-secret\n```\n\nLearn more about using a local Kubernetes secret with these authentication methods:\n\n* [Git repository HTTPS authentication](https://fluxcd.io/docs/components/source/gitrepositories/#https-authentication)\n* [Git repository HTTPS self-signed certificates](https://fluxcd.io/docs/components/source/gitrepositories/#https-self-signed-certificates)\n* [Git repository SSH authentication](https://fluxcd.io/docs/components/source/gitrepositories/#ssh-authentication)\n* [Bucket static authentication](https://fluxcd.io/docs/components/source/buckets/#static-authentication)\n\n> [!NOTE]\n> If you need Flux to access the source through your proxy, you must update the Azure Arc agents with the proxy settings. For more information, see [Connect using an outbound proxy server](./quickstart-connect-cluster.md#connect-using-an-outbound-proxy-server).",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "f121d0aee64a1f314da78293489ce92d8de182d13ad4d012af19d1a36f92fbd8",
    "file_id": "02d4b2af2163dc989c6ea4559d43d61f5cf0f807501e695739a66da6794c9888",
    "chunk_id": "fd5ea8dd9d9dac8ed0d59d78cf0f323749fba915ea93c245d4dc4d976c693eb2",
    "prev_chunk_id": "2272d298b9e68271f31664362f07aa2ab8e2923cd9ca0645fa5332026bbffae7",
    "next_chunk_id": "7b2bd28634e9b2c18b783598dfc13b5ab8919078f0f02342b0d7cc609519192a",
    "parent_heading_chunk_id": "ded11cbf3909198604184cfa6501e953a5dcc9c6f6de8bb59acc2fb473409650",
    "total_chunks_in_file": 17
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/gitops-flux2-parameters.md",
    "section": [
      "GitOps (Flux v2) supported parameters",
      "Local secret for authentication with source"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-03T19:17:33.664788"
}