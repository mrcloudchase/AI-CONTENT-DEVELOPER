{
  "data": {
    "content": "## How do I address expired Azure Arc-enabled Kubernetes resources?\n\nThe system-assigned managed identity associated with your Azure Arc-enabled Kubernetes cluster is only used by the Azure Arc agents to communicate with the Azure Arc services. The certificate associated with this system assigned managed identity has an expiration window of 90 days, and the agents will attempt to renew this certificate between Day 46 to Day 90. To avoid having your managed identity certificate expire, be sure that the cluster comes online at least once between Day 46 and Day 90 so that the certificate can be renewed.\n\nIf the managed identity certificate expires, the resource is considered `Expired` and all Azure Arc features (such as configuration, monitoring, and policy) will stop working on the cluster.\n\nTo check when the managed identity certificate will expire for a given cluster, run the following command:\n\n```azurecli\naz connectedk8s show -n <name> -g <resource-group>\n```\n\nIn the output, the value of the `managedIdentityCertificateExpirationTime` indicates when the managed identity certificate will expire (90D mark for that certificate).\n\nIf the value of `managedIdentityCertificateExpirationTime` indicates a timestamp from the past, then the `connectivityStatus` field in the above output will be set to `Expired`. In such cases, to get your Kubernetes cluster working with Azure Arc again:\n\n1. Delete the Azure Arc-enabled Kubernetes resource and agents on the cluster.\n\n    ```azurecli\n    az connectedk8s delete -n <name> -g <resource-group>\n    ```\n\n1. Recreate the Azure Arc-enabled Kubernetes resource by deploying agents on the cluster.\n\n    ```azurecli\n    az connectedk8s connect -n <name> -g <resource-group>\n    ```\n\n> [!NOTE]\n> `az connectedk8s delete` will also delete configurations and cluster extensions on top of the cluster. After running `az connectedk8s connect`, recreate the configurations and cluster extensions on the cluster, either manually or using Azure Policy.",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/faq.md",
    "heading_path": [
      "Frequently Asked Questions - Azure Arc-enabled Kubernetes and GitOps",
      "How do I address expired Azure Arc-enabled Kubernetes resources?"
    ],
    "section_level": 2,
    "chunk_index": 4,
    "frontmatter": {
      "title": "Azure Arc-enabled Kubernetes and GitOps frequently asked questions",
      "ms.date": "11/25/2024",
      "ms.topic": "concept-article",
      "description": "This article contains a list of frequently asked questions related to Azure Arc-enabled Kubernetes and Azure GitOps.",
      "ms.custom": "references_regions"
    },
    "embedding_content": "Document: Azure Arc-enabled Kubernetes and GitOps frequently asked questions | Topic: concept-article | Description: This article contains a list of frequently asked questions related to Azure Arc-enabled Kubernetes a | Section: Frequently Asked Questions - Azure Arc-enabled Kubernetes and GitOps > How do I address expired Azure Arc-enabled Kubernetes resources? | ## How do I address expired Azure Arc-enabled Kubernetes resources?\n\nThe system-assigned managed identity associated with your Azure Arc-enabled Kubernetes cluster is only used by the Azure Arc agents to communicate with the Azure Arc services. The certificate associated with this system assigned managed identity has an expiration window of 90 days, and the agents will attempt to renew this certificate between Day 46 to Day 90. To avoid having your managed identity certificate expire, be sure that the cluster comes online at least once between Day 46 and Day 90 so that the certificate can be renewed.\n\nIf the managed identity certificate expires, the resource is considered `Expired` and all Azure Arc features (such as configuration, monitoring, and policy) will stop working on the cluster.\n\nTo check when the managed identity certificate will expire for a given cluster, run the following command:\n\n```azurecli\naz connectedk8s show -n <name> -g <resource-group>\n```\n\nIn the output, the value of the `managedIdentityCertificateExpirationTime` indicates when the managed identity certificate will expire (90D mark for that certificate).\n\nIf the value of `managedIdentityCertificateExpirationTime` indicates a timestamp from the past, then the `connectivityStatus` field in the above output will be set to `Expired`. In such cases, to get your Kubernetes cluster working with Azure Arc again:\n\n1. Delete the Azure Arc-enabled Kubernetes resource and agents on the cluster.\n\n    ```azurecli\n    az connectedk8s delete -n <name> -g <resource-group>\n    ```\n\n1. Recreate the Azure Arc-enabled Kubernetes resource by deploying agents on the cluster.\n\n    ```azurecli\n    az connectedk8s connect -n <name> -g <resource-group>\n    ```\n\n> [!NOTE]\n> `az connectedk8s delete` will also delete configurations and cluster extensions on top of the cluster. After running `az connectedk8s connect`, recreate the configurations and cluster extensions on the cluster, either manually or using Azure Policy.",
    "embedding": null,
    "embedding_model": null,
    "embedding_generated_at": null,
    "content_hash": "0bb170a8ed28620af240b44ac9622b19f58761ae74e929d325436a869d39a124",
    "file_id": "b92a724f0fb23595568f96500b06e2dfd4bf4d0eaafd36f99a05727a0a59ec7c",
    "chunk_id": "5add99f236016b34caaf003b7a49d19a0a237c5a7ad6b1b5bb916c6f0fec7de4",
    "prev_chunk_id": "4cfa2fba8313fe153e58a6a7901f1d1125dde8a38d51c4c6a9fc02c686b7eaf4",
    "next_chunk_id": "bf668390d365647294c1506ff4ed9df0d7abb77d7f22e0e7b24fe372a3314492",
    "parent_heading_chunk_id": "198fb67868d3e01eb5b61ec21a7fa107d2737bed8ad3471bb7bb98b48d9ec8db",
    "total_chunks_in_file": 11
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-management-docs/articles/azure-arc/kubernetes/faq.md",
    "section": [
      "Frequently Asked Questions - Azure Arc-enabled Kubernetes and GitOps",
      "How do I address expired Azure Arc-enabled Kubernetes resources?"
    ],
    "has_embedding": false
  },
  "timestamp": "2025-06-02T15:36:19.650526"
}