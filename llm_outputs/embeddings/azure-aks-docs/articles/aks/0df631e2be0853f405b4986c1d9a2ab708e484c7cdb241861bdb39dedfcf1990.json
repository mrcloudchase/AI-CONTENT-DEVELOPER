{
  "data": {
    "content": "### Rotate existing keys in a private key vault\n\nAfter you change the key ID (including the key name and the key version), you can use the [az aks update][az-aks-update] command. You can use the `--enable-azure-keyvault-kms`, `--azure-keyvault-kms-key-id`, `--azure-keyvault-kms-key-vault-network-access`, and `--azure-keyvault-kms-key-vault-resource-id` parameters with `az-aks-update` to rotate the existing keys of KMS.\n\n> [!WARNING]\n> Remember to update all secrets after key rotation. If you don't update all secrets, the secrets are inaccessible if the keys that were created earlier don't exist or no longer work.\n>\n> After you rotate the key, the previous key (key1) is still cached and shouldn't be deleted. If you want to delete the previous key (key1) immediately, you need to rotate the key twice. Then key2 and key3 are cached, and key1 can be deleted without affecting the existing cluster.\n>\n> After rotating KMS key version with the new `keyId`, please check `securityProfile.azureKeyVaultKms.keyId` in AKS resource json. Ensure the new key version is in use.\n\n```azurecli-interactive\naz aks update --name myAKSCluster --resource-group MyResourceGroup  --enable-azure-keyvault-kms --azure-keyvault-kms-key-id $NewKEY_ID --azure-keyvault-kms-key-vault-network-access \"Private\" --azure-keyvault-kms-key-vault-resource-id $KEYVAULT_RESOURCE_ID\n```\n\nUse the following command to update all secrets. If you don't update all secrets, secrets that were created earlier are encrypted with the previous key. For larger clusters, you might want to subdivide the secrets by namespace or create an update script. If the above command to update KMS fails, please still run the below command to avoid unexpected state for KMS plugin.\n\n```azurecli-interactive\nkubectl get secrets --all-namespaces -o json | kubectl replace -f -\n```",
    "file_path": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-aks-docs/articles/aks/use-kms-etcd-encryption.md",
    "heading_path": [
      "Add Key Management Service etcd encryption to an Azure Kubernetes Service cluster",
      "Turn on KMS for a private key vault",
      "Rotate existing keys in a private key vault"
    ],
    "section_level": 3,
    "chunk_index": 23,
    "frontmatter": {
      "title": "Use Key Management Service etcd encryption in Azure Kubernetes Service",
      "description": "Learn how to use Key Management Service (KMS) etcd encryption with Azure Kubernetes Service (AKS).",
      "ms.topic": "how-to",
      "ms.subservice": "aks-security",
      "ms.custom": "devx-track-azurecli",
      "ms.date": "09/26/2024"
    },
    "embedding_content": "Document: Use Key Management Service etcd encryption in Azure Kubernetes Service | Topic: how-to | Description: Learn how to use Key Management Service (KMS) etcd encryption with Azure Kubernetes Service (AKS). | Section: Add Key Management Service etcd encryption to an Azure Kubernetes Service cluster > Turn on KMS for a private key vault > Rotate existing keys in a private key vault | ### Rotate existing keys in a private key vault\n\nAfter you change the key ID (including the key name and the key version), you can use the [az aks update][az-aks-update] command. You can use the `--enable-azure-keyvault-kms`, `--azure-keyvault-kms-key-id`, `--azure-keyvault-kms-key-vault-network-access`, and `--azure-keyvault-kms-key-vault-resource-id` parameters with `az-aks-update` to rotate the existing keys of KMS.\n\n> [!WARNING]\n> Remember to update all secrets after key rotation. If you don't update all secrets, the secrets are inaccessible if the keys that were created earlier don't exist or no longer work.\n>\n> After you rotate the key, the previous key (key1) is still cached and shouldn't be deleted. If you want to delete the previous key (key1) immediately, you need to rotate the key twice. Then key2 and key3 are cached, and key1 can be deleted without affecting the existing cluster.\n>\n> After rotating KMS key version with the new `keyId`, please check `securityProfile.azureKeyVaultKms.keyId` in AKS resource json. Ensure the new key version is in use.\n\n```azurecli-interactive\naz aks update --name myAKSCluster --resource-group MyResourceGroup  --enable-azure-keyvault-kms --azure-keyvault-kms-key-id $NewKEY_ID --azure-keyvault-kms-key-vault-network-access \"Private\" --azure-keyvault-kms-key-vault-resource-id $KEYVAULT_RESOURCE_ID\n```\n\nUse the following command to update all secrets. If you don't update all secrets, secrets that were created earlier are encrypted with the previous key. For larger clusters, you might want to subdivide the secrets by namespace or create an update script. If the above command to update KMS fails, please still run the below command to avoid unexpected state for KMS plugin.\n\n```azurecli-interactive\nkubectl get secrets --all-namespaces -o json | kubectl replace -f -\n```",
    "embedding": [
      0.015504674054682255,
      -0.0007575048366561532,
      0.047362856566905975,
      -0.038831524550914764,
      0.022520994767546654,
      0.026969321072101593,
      0.0020629919599741697,
      0.04203345999121666,
      -0.02443356066942215,
      0.018104903399944305,
      0.03878854587674141,
      -0.04055068641901016,
      -0.0008085424196906388,
      0.004950643517076969,
      0.013387958519160748,
      0.014462432824075222,
      -0.053079064935445786,
      0.0250997357070446,
      -0.03945472091436386,
      0.02587335743010044,
      -0.05729100480675697,
      -0.016095634549856186,
      0.021693648770451546,
      0.05935399606823921,
      -0.04448326304554939,
      0.021435774862766266,
      0.009654157795011997,
      -0.029161250218749046,
      0.020372046157717705,
      -0.016514679417014122,
      0.01897522807121277,
      -0.04658923298120499,
      -0.04168962687253952,
      0.0024417443200945854,
      -0.0250997357070446,
      0.008031700737774372,
      -0.013054871000349522,
      -0.009912031702697277,
      0.01975959539413452,
      -0.03236318752169609,
      -0.0006772549822926521,
      -0.0977342426776886,
      0.007607282605022192,
      0.05716206878423691,
      -0.00819824356585741,
      -0.001300786272622645,
      -0.013001146726310253,
      -0.055657804012298584,
      0.00806930661201477,
      -0.003137466963380575,
      0.02563697285950184,
      0.05299310386180878,
      0.012120077386498451,
      0.02101672999560833,
      -9.493994002696127e-05,
      0.01046538632363081,
      0.0261527206748724,
      -0.007918880321085453,
      0.024412071332335472,
      0.05071521922945976,
      0.0488671213388443,
      -0.036940447986125946,
      0.040787070989608765,
      0.04538582265377045,
      0.019652146846055984,
      -0.0011308848625048995,
      0.0023289246018975973,
      0.02971997670829296,
      0.0019152516033500433,
      -0.0315895639359951,
      -0.023681428283452988,
      0.04689008742570877,
      -0.047792647033929825,
      -0.008203616365790367,
      -0.048222437500953674,
      0.01725606806576252,
      -0.054368432611227036,
      0.03752066567540169,
      0.031374670565128326,
      -0.02862401306629181,
      -0.021371306851506233,
      -0.003975557163357735,
      0.0105352271348238,
      0.023552490398287773,
      -0.03629576414823532,
      -0.009213622659444809,
      -0.04534284397959709,
      -0.05935399606823921,
      -0.003975557163357735,
      -0.021081198006868362,
      -0.017965221777558327,
      -0.005657110828906298,
      -0.04474113881587982,
      0.016933726146817207,
      0.016847766935825348,
      0.061545927077531815,
      0.02012491598725319,
      -0.013774769380688667,
      -0.022435037419199944,
      0.05101606994867325,
      0.02305823192000389,
      -0.02323014847934246,
      -0.006124507170170546,
      0.014075621962547302,
      0.02879592962563038,
      -0.01917937770485878,
      0.024884840473532677,
      0.03571554645895958,
      -0.010314960032701492,
      -0.0384662039577961,
      -0.05892420560121536,
      -0.05699015036225319,
      -0.031116794794797897,
      -0.01098113413900137,
      0.028581034392118454,
      -0.00022496820020023733,
      -0.011937417089939117,
      0.009654157795011997,
      0.00044053472811356187,
      0.019963745027780533,
      -0.03305085003376007,
      0.003403399372473359,
      0.022757379338145256,
      -0.008133775554597378,
      -0.007505207788199186,
      -0.04585859179496765,
      0.008219733834266663,
      0.03816534951329231,
      -0.04671817272901535,
      0.03704789653420448,
      0.03356659784913063,
      -0.022778868675231934,
      0.039755575358867645,
      -0.032406166195869446,
      0.010347194038331509,
      -0.004300585947930813,
      0.02997785061597824,
      -0.0008045131107792258,
      -0.011561350896954536,
      0.034039366990327835,
      0.014290517196059227,
      -0.03255658969283104,
      0.014032643288373947,
      0.02537909895181656,
      -0.05032840743660927,
      -0.06502722203731537,
      0.006908874027431011,
      0.023960791528224945,
      -0.028817418962717056,
      0.013280510902404785,
      -0.008724736981093884,
      -0.000120878430607263,
      -0.012990402057766914,
      0.03023572638630867,
      0.01852394826710224,
      -0.013796258717775345,
      -0.017417239025235176,
      0.06352295726537704,
      0.01722383312880993,
      0.013441681861877441,
      0.004545029252767563,
      0.059998683631420135,
      -0.0687234178185463,
      0.01845948025584221,
      -0.01570882461965084,
      -0.016127869486808777,
      0.006350147072225809,
      0.026604000478982925,
      -0.023810366168618202,
      -0.015569142065942287,
      0.0146021144464612,
      -0.05290714651346207,
      0.028645502403378487,
      0.020565450191497803,
      -0.038143862038850784,
      -0.001963603077456355,
      -0.02202673628926277,
      -0.0020656781271100044,
      -0.016514679417014122,
      0.002933316631242633,
      -0.007295684888958931,
      0.017470963299274445,
      -0.027119748294353485,
      0.06072932481765747,
      -0.03485596925020218,
      0.00260157254524529,
      -0.005995570216327906,
      -0.014215303584933281,
      -0.024906329810619354,
      0.04031430184841156,
      0.003819758538156748,
      -0.00037505890941247344,
      0.0019474858418107033,
      -0.023681428283452988,
      0.011926672421395779,
      0.009020217694342136,
      0.0380793921649456,
      -0.02888188697397709,
      0.01952321082353592,
      0.018427245318889618,
      0.03999195992946625,
      0.005834399256855249,
      0.05217650532722473,
      -0.03040764108300209,
      0.011819224804639816,
      -1.739726030791644e-05,
      -0.06954001635313034,
      -0.010997251607477665,
      -0.06790681928396225,
      -0.006994831841439009,
      -0.009627295657992363,
      0.013570618815720081,
      -0.04364517331123352,
      0.0007165404967963696,
      -0.007838294841349125,
      0.03214829042553902,
      -0.024970797821879387,
      -0.00856893789023161,
      -0.028473585844039917,
      0.013366468250751495,
      -0.036596618592739105,
      -0.012249014340341091,
      -0.008423883467912674,
      0.006860522553324699,
      0.003841248108074069,
      0.045815613120794296,
      -0.003685449017211795,
      -0.03500639274716377,
      0.030622536316514015,
      0.0300638098269701,
      -0.04426836967468262,
      -0.018846290186047554,
      -0.02228461019694805,
      0.008294946514070034,
      -0.02537909895181656,
      -0.07572899758815765,
      -0.013914451003074646,
      -0.03356659784913063,
      -0.010030223987996578,
      -0.006511318497359753,
      0.03193339705467224,
      0.00476529635488987,
      -0.052735231816768646,
      -0.013044126331806183,
      -0.017556920647621155,
      -0.004534284584224224,
      -0.00115774676669389,
      -0.04452624171972275,
      -9.284135012421757e-05,
      0.012356461957097054,
      -0.0034624955151230097,
      0.05050032213330269,
      0.002772145438939333,
      -0.007644889410585165,
      0.009165271185338497,
      0.002319522900506854,
      0.059740807861089706,
      -0.0058129094541072845,
      -0.032492123544216156,
      -0.020178640261292458,
      0.00659727631136775,
      0.019157888367772102,
      -0.07125917822122574,
      -0.02256397344172001,
      -0.03580150753259659,
      0.02003895863890648,
      -0.006237327121198177,
      -0.01722383312880993,
      -0.024541007354855537,
      -0.03313680738210678,
      -0.026410594582557678,
      0.03477000817656517,
      0.0007407161756418645,
      -0.014752541668713093,
      0.034383200109004974,
      0.029247209429740906,
      0.0005583912134170532,
      -0.00882681179791689,
      -0.012249014340341091,
      0.054712265729904175,
      -0.003809013869613409,
      -0.04517092928290367,
      0.015322012826800346,
      -0.03040764108300209,
      0.02630314789712429,
      0.03827279806137085,
      -0.007000204175710678,
      -0.01627829484641552,
      -0.0341683030128479,
      -0.03915386646986008,
      0.01149688195437193,
      0.003290579654276371,
      0.004281782545149326,
      0.007618027739226818,
      -0.0002056612283922732,
      0.02484186179935932,
      -0.05080117657780647,
      0.014709562063217163,
      -0.05097309127449989,
      0.004480560775846243,
      -0.017062662169337273,
      0.01699819415807724,
      -0.027270175516605377,
      0.04132430627942085,
      0.004206569399684668,
      0.014440943486988544,
      0.027377622202038765,
      -0.04083004966378212,
      0.04946882650256157,
      0.030708493664860725,
      0.007800688035786152,
      0.042420271784067154,
      -0.018072668462991714,
      0.023101212456822395,
      0.006500573363155127,
      -0.050457343459129333,
      0.005872005596756935,
      -0.03726279363036156,
      -0.027377622202038765,
      -0.033437661826610565,
      -0.025830378755927086,
      -0.07121620327234268,
      0.02323014847934246,
      -0.04555773735046387,
      0.01950172148644924,
      0.0027748316060751677,
      -0.005694717168807983,
      0.021468009799718857,
      0.0704425796866417,
      -0.024218665435910225,
      0.02555101551115513,
      -0.006312540266662836,
      0.02282184734940529,
      -0.009922776371240616,
      0.019791828468441963,
      -0.006129879504442215,
      0.05931101739406586,
      0.027699964120984077,
      -0.01451615709811449,
      -0.0462883822619915,
      0.0020226992201060057,
      0.016407232731580734,
      0.0162245724350214,
      -0.009240484796464443,
      -0.02810826525092125,
      0.024455050006508827,
      -0.0024215979501605034,
      -0.009455380029976368,
      0.02443356066942215,
      0.05118798837065697,
      0.023445043712854385,
      0.02443356066942215,
      -0.04482709616422653,
      -0.004896919708698988,
      0.012238269671797752,
      -0.00039050448685884476,
      -0.018985971808433533,
      0.01674032025039196,
      -0.03820832818746567,
      -0.02139279618859291,
      -0.0059794532135128975,
      0.010932782664895058,
      -0.004222686402499676,
      -0.03373851254582405,
      0.019136399030685425,
      -0.025658462196588516,
      -0.009407028555870056,
      0.0031186635605990887,
      0.009809956885874271,
      0.03371702507138252,
      0.05303608253598213,
      -0.027914859354496002,
      -0.018556183204054832,
      0.02408972941339016,
      -0.010728632099926472,
      0.0059149847365915775,
      0.056431423872709274,
      0.003148211631923914,
      -0.0029360027983784676,
      0.0036370977759361267,
      0.04607348516583443,
      0.027721453458070755,
      -0.021457264199852943,
      -0.015279034152626991,
      0.00956282764673233,
      0.026389105245471,
      -0.04269963502883911,
      -0.008466863073408604,
      -0.04016387462615967,
      0.015515418723225594,
      0.009643413126468658,
      0.021296093240380287,
      -0.02280035801231861,
      0.009090058505535126,
      0.01345242653042078,
      0.0480075404047966,
      -0.047276899218559265,
      0.0026902167592197657,
      0.02219865284860134,
      0.004034653306007385,
      0.0395621694624424,
      -0.0041286698542535305,
      -0.026346126571297646,
      0.0352642685174942,
      0.0030139023438096046,
      0.016428722068667412,
      0.0037740932311862707,
      0.013377212919294834,
      0.010916665196418762,
      -0.0075213247910141945,
      0.042506229132413864,
      0.038745567202568054,
      0.03734875097870827,
      -0.03227722644805908,
      0.03859513998031616,
      0.03655363991856575,
      0.014172324910759926,
      0.06597276031970978,
      -0.05883824825286865,
      -0.006264189258217812,
      -0.043107934296131134,
      0.00317238736897707,
      -0.024154197424650192,
      -0.0653710588812828,
      0.015279034152626991,
      0.017900753766298294,
      -0.0004808275552932173,
      0.015612121671438217,
      0.03272850811481476,
      -0.033029358834028244,
      -0.006736957933753729,
      0.018846290186047554,
      0.03227722644805908,
      -0.019995979964733124,
      0.047448813915252686,
      -0.02096300572156906,
      -0.021489499136805534,
      -0.03305085003376007,
      -0.02825869247317314,
      -0.042850062251091,
      -0.007338664028793573,
      -0.0066671171225607395,
      -0.018244585022330284,
      0.0014868046855553985,
      -0.020404279232025146,
      0.024820372462272644,
      0.018706608563661575,
      -0.042334314435720444,
      0.0026150033809244633,
      0.014150835573673248,
      -0.010986506938934326,
      -0.01042240671813488,
      0.04646029695868492,
      -0.012367206625640392,
      -0.011572095565497875,
      -0.010314960032701492,
      0.05759185925126076,
      -0.019684381783008575,
      -0.006108390167355537,
      0.0028178105130791664,
      0.008601171895861626,
      0.04534284397959709,
      -0.03580150753259659,
      0.04125984013080597,
      -0.01713787578046322,
      0.008993355557322502,
      -0.012646570801734924,
      -0.0016587207792326808,
      -0.016084890812635422,
      -0.039497699588537216,
      0.06734809279441833,
      -0.01007857546210289,
      0.007886646315455437,
      -0.024927819147706032,
      -0.05935399606823921,
      -0.05067224055528641,
      0.0010019479086622596,
      0.020221618935465813,
      0.011346455663442612,
      0.024025259539484978,
      0.004034653306007385,
      0.009584316983819008,
      -0.022327588871121407,
      0.045815613120794296,
      0.030450619757175446,
      0.07994093745946884,
      0.043946027755737305,
      0.047792647033929825,
      0.03492043539881706,
      0.006758447736501694,
      0.008955748751759529,
      0.04020685330033302,
      -0.03562958911061287,
      -0.00724196108058095,
      0.03014976717531681,
      -0.01746021769940853,
      0.016321275383234024,
      -0.06472637504339218,
      0.006441477220505476,
      0.007327919360250235,
      0.007532069459557533,
      -0.023208659142255783,
      0.04671817272901535,
      0.05561482533812523,
      -0.011335710994899273,
      0.04955478385090828,
      -0.014806265011429787,
      -0.04373113065958023,
      0.005726951640099287,
      0.011034857481718063,
      0.021328328177332878,
      -0.023552490398287773,
      0.04646029695868492,
      0.01720234379172325,
      0.001489490969106555,
      0.010314960032701492,
      -0.007231216412037611,
      -0.006065411027520895,
      0.010067830793559551,
      0.03982004150748253,
      -0.021457264199852943,
      -0.01035256590694189,
      0.015515418723225594,
      0.03706938773393631,
      -0.001493520219810307,
      0.004096435848623514,
      -0.014150835573673248,
      -0.07164599001407623,
      -0.01396817434579134,
      -0.005380433518439531,
      0.023767385631799698,
      -0.02222014218568802,
      0.0454288013279438,
      0.005385805852711201,
      -0.016374997794628143,
      -0.012066354043781757,
      -0.008676385506987572,
      0.021263860166072845,
      -0.005716206971555948,
      0.027828902006149292,
      0.03410383686423302,
      0.030794452875852585,
      -0.010701770894229412,
      0.02305823192000389,
      0.002590827876701951,
      -0.01294742338359356,
      0.029010824859142303,
      0.009621922858059406,
      0.016493190079927444,
      0.018384266644716263,
      0.01187294814735651,
      -0.061116136610507965,
      -0.03406085819005966,
      0.02288631722331047,
      0.023036742582917213,
      0.009863680228590965,
      -0.0047088866122066975,
      0.0003626352990977466,
      0.055657804012298584,
      0.009084685705602169,
      0.015687335282564163,
      0.04809349775314331,
      -0.010486875660717487,
      -0.05329395830631256,
      -0.020458003506064415,
      -0.02282184734940529,
      0.05187565088272095,
      -0.011281986720860004,
      -0.0029709232039749622,
      0.004679338540881872,
      0.014881478622555733,
      0.033545106649398804,
      -0.01711638644337654,
      -0.006951853167265654,
      0.0240037702023983,
      0.023380575701594353,
      -0.01818011701107025,
      0.042420271784067154,
      0.004832451231777668,
      0.020092681050300598,
      -0.04792158305644989,
      -0.04321538284420967,
      -0.008456118404865265,
      0.011550606228411198,
      -0.020834069699048996,
      -0.0015364992432296276,
      0.008144520223140717,
      0.004652476403862238,
      -0.02870997041463852,
      -0.01191592775285244,
      -0.01573031395673752,
      0.0016667792806401849,
      0.00832718051970005,
      -0.015407971106469631,
      0.03262105956673622,
      0.03906790912151337,
      0.0001374992134515196,
      0.004257607273757458,
      0.003892285516485572,
      -0.01294742338359356,
      -0.0016332019586116076,
      0.012990402057766914,
      -0.05299310386180878,
      -0.03726279363036156,
      -0.014945946633815765,
      0.03324425593018532,
      -0.0038466204423457384,
      -0.0214250311255455,
      0.005576524883508682,
      0.013377212919294834,
      0.02503526583313942,
      -0.013624342158436775,
      -0.003819758538156748,
      -0.019415762275457382,
      -0.0014747169334441423,
      0.018932249397039413,
      0.011840714141726494,
      0.0033926547039300203,
      -0.01874958723783493,
      0.004741120617836714,
      0.0059149847365915775,
      0.0011127531761303544,
      0.014623604714870453,
      -0.018878525123000145,
      0.0445692203938961,
      0.003962126560509205,
      -0.002631120616570115,
      -0.015622866339981556,
      -0.026625489816069603,
      0.021639926359057426,
      -0.012625080533325672,
      -0.03423277288675308,
      -0.005152107682079077,
      -0.001137600396759808,
      -0.03255658969283104,
      0.00894500408321619,
      0.011303476989269257,
      0.008493724279105663,
      -0.0117869907990098,
      0.030536578968167305,
      0.02245652675628662,
      -0.02029683254659176,
      0.015472439117729664,
      -0.011636563576757908,
      -0.0036478424444794655,
      -0.017556920647621155,
      0.039433229714632034,
      0.04388155788183212,
      0.004558459855616093,
      -0.009159899316728115,
      -0.021887054666876793,
      -0.026668468490242958,
      0.035500653088092804,
      0.04252772033214569,
      0.03859513998031616,
      0.004171648994088173,
      -0.0022913177963346243,
      -0.027442090213298798,
      -0.019533954560756683,
      0.02096300572156906,
      -0.004265665542334318,
      0.014000408351421356,
      -0.017556920647621155,
      -0.020028213039040565,
      0.02340206503868103,
      -0.02948359213769436,
      -0.03272850811481476,
      -0.00033157627331092954,
      -0.0029145132284611464,
      0.030644025653600693,
      -0.03154658526182175,
      -0.009568199515342712,
      0.010685653425753117,
      -0.02122088149189949,
      0.003105232724919915,
      0.016804788261651993,
      0.010771611705422401,
      0.01097038947045803,
      -0.009509103372693062,
      0.012163056991994381,
      0.014634349383413792,
      0.03535022586584091,
      -0.019619913771748543,
      0.015268289484083652,
      -0.013269766233861446,
      -0.029526572674512863,
      0.02340206503868103,
      -0.0005224634660407901,
      0.019243845716118813,
      -0.018244585022330284,
      -0.002933316631242633,
      -0.01251763291656971,
      -0.043946027755737305,
      -0.007037810981273651,
      -0.030901899561285973,
      0.018599161878228188,
      0.02297227457165718,
      0.008251967839896679,
      0.007016321644186974,
      -0.011797735467553139,
      0.02572293020784855,
      0.02742060087621212,
      -0.043623682111501694,
      0.03777854144573212,
      -0.02759251743555069,
      -0.002617689548060298,
      -0.029440613463521004,
      0.0026660410221666098,
      0.039777062833309174,
      -0.031224243342876434,
      -0.009245856665074825,
      -0.003500102087855339,
      0.010932782664895058,
      0.018674375489354134,
      -0.0210704542696476,
      -0.014849243685603142,
      -0.028387628495693207,
      0.029333166778087616,
      0.006183603312820196,
      -0.03494192659854889,
      -0.01734202541410923,
      0.01837352104485035,
      -0.009525220841169357,
      -0.037112366408109665,
      -0.008074679411947727,
      0.034039366990327835,
      0.0011913240887224674,
      0.013054871000349522,
      -0.001517695840448141,
      -0.018470223993062973,
      -0.033459149301052094,
      -0.030128277838230133,
      0.01111007109284401,
      -0.0315895639359951,
      0.008912770077586174,
      0.01503190491348505,
      -0.026410594582557678,
      0.01900746300816536,
      -0.03623129427433014,
      -0.021242370828986168,
      -0.02991338260471821,
      0.0060815284959971905,
      0.0006208450649864972,
      0.010626557283103466,
      0.028989333659410477,
      -0.018298309296369553,
      0.00037505890941247344,
      -0.008176754228770733,
      -0.01414009090512991,
      0.028559545055031776,
      -0.03638172149658203,
      0.0042280592024326324,
      -0.028387628495693207,
      -0.014913712628185749,
      0.006683234125375748,
      0.011958906427025795,
      0.035672567784786224,
      -0.035156819969415665,
      -0.03425426036119461,
      0.015504674054682255,
      -0.00371499708853662,
      0.01883554644882679,
      -0.026432083919644356,
      0.023874834179878235,
      -0.013602852821350098,
      -0.005506684072315693,
      -0.03431873023509979,
      0.0352642685174942,
      -0.008633405901491642,
      0.02537909895181656,
      -0.007102279458194971,
      0.02572293020784855,
      -0.0025921708438545465,
      0.0344046875834465,
      -0.01567658968269825,
      -0.03859513998031616,
      0.006156741641461849,
      -0.020715877413749695,
      0.037971943616867065,
      0.019071931019425392,
      -0.009546710178256035,
      0.016632871702313423,
      -0.03790747746825218,
      -0.016428722068667412,
      -0.012152312323451042,
      -0.023982280865311623,
      5.5024869652697816e-05,
      -0.060170598328113556,
      0.005168224684894085,
      0.03126722201704979,
      -0.025572504848241806,
      0.010384800843894482,
      0.028065286576747894,
      0.016127869486808777,
      -0.019254591315984726,
      -0.018448734655976295,
      0.00036700034979730844,
      -0.02520718239247799,
      -0.05290714651346207,
      0.02589484676718712,
      0.0015485869953408837,
      -0.0017312477575615048,
      -0.03040764108300209,
      -0.04731987789273262,
      0.030987858772277832,
      0.05810760706663132,
      -0.052649274468421936,
      0.03290042281150818,
      -0.01972736045718193,
      -0.023681428283452988,
      0.007446111645549536,
      0.020307576283812523,
      -0.04968372359871864,
      0.002490095794200897,
      -0.00294674769975245,
      -0.01485998835414648,
      0.006865894887596369,
      0.011582840234041214,
      -0.006683234125375748,
      -0.03431873023509979,
      0.03223424777388573,
      0.01020751241594553,
      -0.03410383686423302,
      0.01938352920114994,
      0.011453903280198574,
      0.03049360029399395,
      0.003475926583632827,
      -0.03214829042553902,
      0.03644619137048721,
      0.015053394250571728,
      -0.0018709294963628054,
      -0.026668468490242958,
      -0.0062910509295761585,
      -0.014999670907855034,
      0.02460547722876072,
      0.01605265587568283,
      -0.05037138611078262,
      0.009944265708327293,
      -0.0406581312417984,
      0.005909612402319908,
      -0.017245322465896606,
      0.0210704542696476,
      0.010320331901311874,
      -0.012249014340341091,
      0.030343173071742058,
      0.0003188168630003929,
      0.0035296501591801643,
      -0.010379428043961525,
      0.046761151403188705,
      -0.012377951294183731,
      -0.0041662766598165035,
      0.013344978913664818,
      0.030278705060482025,
      -0.041818566620349884,
      -0.012281249277293682,
      0.0007017664611339569,
      0.020887793973088264,
      0.023101212456822395,
      -0.014709562063217163,
      0.010588950477540493,
      0.04878116399049759,
      -0.005710834637284279,
      -0.020651409402489662,
      -0.013613597489893436,
      -0.005920357070863247,
      -0.005608759354799986,
      -0.015074883587658405,
      -0.012109332717955112,
      0.008837556466460228,
      -0.022757379338145256,
      -0.017245322465896606,
      -0.012324227951467037,
      -0.03468405082821846,
      0.023810366168618202,
      -0.0054986258037388325,
      0.019147144630551338,
      0.04474113881587982,
      0.024755902588367462,
      -0.000910617527551949,
      0.06541403383016586,
      0.012893700040876865,
      0.010965016670525074,
      -0.021199390292167664,
      -0.004048084374517202,
      0.008466863073408604,
      0.01619233749806881,
      0.02365993894636631,
      0.01412934623658657,
      -0.03401787579059601,
      0.01785777322947979,
      -0.038487691432237625,
      0.009176015853881836,
      0.041474733501672745,
      0.013602852821350098,
      0.0007138543296605349,
      -0.020694388076663017,
      -0.0021583514753729105,
      -0.007779198698699474,
      0.01717011071741581,
      0.0038385617081075907,
      -0.006548924837261438,
      -0.013119339011609554,
      -0.0022268493194133043,
      0.01003559585660696,
      0.01938352920114994,
      0.006914246361702681,
      0.016493190079927444,
      0.04929691180586815,
      -0.006119134835898876,
      0.022671421989798546,
      0.013678066432476044,
      -0.038143862038850784,
      0.057376962155103683,
      0.01759989932179451,
      -0.007698613218963146,
      -0.00023504139971919358,
      -0.03186892718076706,
      0.007327919360250235,
      -0.014784775674343109,
      -0.01238869596272707,
      0.007661006413400173,
      -0.024025259539484978,
      0.04766371101140976,
      -0.026625489816069603,
      -0.0028500447515398264,
      0.0198992770165205,
      0.02649655193090439,
      0.0004898934275843203,
      0.011840714141726494,
      -0.012270503677427769,
      -0.03066551499068737,
      -0.040185362100601196,
      -0.0125498678535223,
      -0.023552490398287773,
      0.015461694449186325,
      0.025314630940556526,
      0.00011600971629377455,
      -0.048566266894340515,
      -0.030472110956907272,
      -0.003451750846579671,
      0.009149154648184776,
      0.027356132864952087,
      0.023208659142255783,
      0.009208250790834427,
      0.028731459751725197,
      -0.047448813915252686,
      -0.006935735698789358,
      0.037112366408109665,
      -0.006113762501627207,
      -0.007655634079128504,
      0.035651080310344696,
      0.0036075497046113014,
      0.04229133576154709,
      -0.035135332494974136,
      -0.028817418962717056,
      -0.021865565329790115,
      0.030858920887112617,
      0.05286416783928871,
      -0.011120815761387348,
      -0.025422077625989914,
      0.00022211411851458251,
      -0.017578409984707832,
      -0.010411662049591541,
      -5.628402141155675e-05,
      -0.01820160634815693,
      0.02110268920660019,
      -0.0021140296012163162,
      0.0006017059786245227,
      0.002629777416586876,
      -0.006194347981363535,
      0.023423554375767708,
      0.052735231816768646,
      0.023445043712854385,
      0.00824122317135334,
      -0.049339890480041504,
      0.019362038001418114,
      0.05295012518763542,
      -0.008450745604932308,
      0.0387025885283947,
      0.001089249039068818,
      -0.02929018810391426,
      -0.016869256272912025,
      -0.056947171688079834,
      -0.03442617878317833,
      -0.022005246952176094,
      -0.007021693978458643,
      -0.026539532467722893,
      0.01465583872050047,
      0.02931167744100094,
      0.005144048947840929,
      0.005130617879331112,
      -0.03500639274716377,
      -0.012066354043781757,
      0.001258478849194944,
      -0.026969321072101593,
      -0.003905716584995389,
      0.026840385049581528,
      -0.013087105005979538,
      0.02219865284860134,
      -0.007994093932211399,
      -0.010938155464828014,
      0.041968993842601776,
      -0.007569676265120506,
      -0.012485398910939693,
      0.013130083680152893,
      0.016514679417014122,
      -0.02931167744100094,
      0.008456118404865265,
      -0.02374589629471302,
      0.02724868431687355,
      0.005127931945025921,
      0.009981872513890266,
      -0.020952261984348297,
      0.0010543285170570016,
      -0.06279231607913971,
      -0.0344046875834465,
      0.011153049767017365,
      -0.035651080310344696,
      0.0017151306383311749,
      -0.021897800266742706,
      -0.003330872394144535,
      -0.010476130992174149,
      0.006414615549147129,
      0.004456385038793087,
      -0.027828902006149292,
      -0.002447116654366255,
      0.025422077625989914,
      0.0017137875547632575,
      0.023531001061201096,
      0.005635621026158333,
      -0.05355183407664299,
      -0.019028952345252037,
      0.029934871941804886,
      -0.02127460390329361,
      -0.01174401119351387,
      -0.031374670565128326,
      0.019447997212409973,
      -0.009874424897134304,
      0.013162318617105484,
      -0.006323285400867462,
      -0.04680413007736206,
      -0.012528378516435623,
      0.008773088455200195,
      0.008735481649637222,
      0.04014238342642784,
      0.010879059322178364,
      -0.03790747746825218,
      -0.04177558794617653,
      0.01768585853278637,
      0.009299580939114094,
      -0.042506229132413864,
      -0.00881606712937355,
      -0.00691961869597435,
      0.010250491090118885,
      0.01371030043810606,
      0.03913237899541855,
      -0.00304345041513443,
      0.019598422572016716,
      0.03270701691508293,
      0.014688072726130486,
      -0.009643413126468658,
      -0.017438728362321854,
      -5.5444586905650795e-05,
      0.012249014340341091,
      0.007053927984088659,
      0.02012491598725319,
      -0.009476869367063046,
      0.007977976463735104,
      0.02503526583313942,
      0.008525959216058254,
      0.01688000187277794,
      0.005909612402319908,
      0.013516895473003387,
      -0.036080870777368546,
      -0.0029145132284611464,
      0.019705871120095253,
      -0.03133168816566467,
      0.04959776625037193,
      -0.011314221657812595,
      0.01097038947045803,
      0.03672555461525917,
      0.024197176098823547,
      -0.0006436776602640748,
      0.0038466204423457384,
      0.013162318617105484,
      0.025679951533675194,
      -0.06029953435063362,
      -0.008230478502810001,
      0.03966961428523064,
      -0.0030971739906817675,
      -0.011432413943111897,
      -0.010879059322178364,
      -0.009987244382500648,
      -0.006801426410675049,
      -0.004150159657001495,
      -0.015364992432296276,
      -0.028430607169866562,
      -0.0036478424444794655,
      -0.05815058574080467,
      -0.0002009603922488168,
      0.060858260840177536,
      -0.015407971106469631,
      0.0250997357070446,
      -0.018846290186047554,
      -0.005619504023343325,
      0.018384266644716263,
      -0.02845209650695324,
      0.0021677531767636538,
      -0.00946075189858675,
      0.017535431310534477,
      0.026088252663612366,
      -0.012603591196238995,
      -0.027055280283093452,
      -0.015612121671438217,
      0.025228671729564667,
      0.019770339131355286,
      -0.03208382427692413,
      -0.012281249277293682,
      -0.018448734655976295,
      0.009159899316728115,
      0.007779198698699474,
      -0.0015929091023281217,
      -0.022907806560397148,
      0.03586597368121147,
      0.02733464352786541,
      -0.02649655193090439,
      -0.015988187864422798,
      -0.021887054666876793,
      0.02793634869158268,
      -0.021747373044490814,
      0.0052676135674119,
      0.011754755862057209,
      -0.004859312903136015,
      -0.005001680925488472,
      0.023423554375767708,
      0.014419454149901867,
      0.005732323974370956,
      -0.04063664376735687,
      -0.011647308245301247,
      -0.01912565529346466,
      0.014054132625460625,
      0.007118396461009979,
      -0.015171586535871029,
      0.013398703187704086,
      0.021865565329790115,
      0.04059366509318352,
      0.026002293452620506,
      0.053680770099163055,
      0.017277557402849197,
      0.02391781285405159,
      -0.05819356441497803,
      0.01837352104485035,
      0.0030541950836777687,
      -0.01503190491348505,
      0.012367206625640392,
      -0.023251637816429138,
      -0.03973408415913582,
      -0.003475926583632827,
      0.0026646978221833706,
      0.00888590794056654,
      0.028151243925094604,
      -0.013903706334531307,
      0.003908402752131224,
      -0.009885169565677643,
      0.035414695739746094,
      -0.001740649458952248,
      -0.00640924321487546,
      0.005289102904498577,
      -0.023767385631799698,
      -0.0011557320831343532,
      -0.017793305218219757,
      -0.00595796387642622,
      0.0040239086374640465,
      0.005517428740859032,
      -0.0001732590899337083,
      0.023036742582917213,
      0.004152845591306686,
      -0.010169905610382557,
      -0.04007791727781296,
      0.005243437830358744,
      -0.030278705060482025,
      0.018588416278362274,
      -0.018427245318889618,
      -0.027184216305613518,
      0.02211269550025463,
      0.0063179126009345055,
      0.04007791727781296,
      0.007129141595214605,
      0.0071452585980296135,
      -0.003408771939575672,
      0.005033915396779776,
      -0.034383200109004974,
      -0.020780345425009727,
      -0.01828756369650364,
      -0.02647506259381771,
      -0.01708415150642395,
      0.017642879858613014,
      0.005753813311457634,
      -0.014945946633815765,
      0.034383200109004974,
      -0.027785923331975937,
      -0.006806798744946718,
      -0.009342559613287449,
      0.019190123304724693,
      0.011926672421395779,
      -0.028989333659410477,
      0.0014397964114323258,
      0.005549663212150335,
      0.04603050649166107,
      -0.002221476985141635,
      0.01975959539413452,
      -0.0063286577351391315,
      0.008837556466460228,
      0.0011349142296239734,
      0.01831979863345623,
      0.005095697473734617,
      0.007875901646912098,
      0.004238803870975971,
      0.020737366750836372,
      0.013473915867507458,
      0.013484660536050797,
      0.010578205808997154,
      0.01679404452443123,
      0.01217380166053772,
      0.03227722644805908,
      -0.02810826525092125,
      0.010803845711052418,
      -0.02417568676173687,
      0.02264993265271187,
      0.021231625229120255,
      0.02939763478934765,
      0.018599161878228188,
      0.025830378755927086,
      0.015375737100839615,
      0.028752950951457024,
      0.014677328057587147,
      0.01293667871505022,
      -0.022241631522774696,
      0.013387958519160748,
      0.005882750265300274,
      0.05587269738316536,
      0.009686391800642014,
      0.020651409402489662,
      -0.053852684795856476,
      -0.008928886614739895,
      -0.03178296983242035,
      0.007344036363065243,
      0.0064199878834187984,
      -0.028301671147346497,
      0.030880410224199295,
      -4.062858351971954e-05,
      -0.008096168749034405,
      -0.017986711114645004,
      0.0041259839199483395,
      0.007091534789651632,
      0.03971259295940399,
      0.04272112622857094,
      0.019254591315984726,
      -0.011711777187883854,
      -0.023294616490602493,
      -0.024218665435910225,
      -0.0021999874152243137,
      -0.04312942549586296,
      -0.01570882461965084,
      0.012893700040876865,
      -0.020350554957985878,
      0.01883554644882679,
      -0.005963336210697889,
      0.02580888941884041,
      -0.037971943616867065,
      0.022069714963436127,
      0.011991140432655811,
      -0.01596669852733612,
      0.00456651858985424,
      -0.004429522901773453,
      0.014279772527515888,
      0.031116794794797897,
      0.022671421989798546,
      0.00997649971395731,
      -0.013785514049232006,
      0.00019441281619947404,
      0.05178969353437424,
      0.03470554202795029,
      0.004969446919858456,
      -0.013119339011609554,
      0.015354246832430363,
      0.01688000187277794,
      -0.03706938773393631,
      0.020683642476797104,
      -0.02888188697397709,
      0.008203616365790367,
      0.05660334229469299,
      -0.0002687866217456758,
      -0.0030004712752997875,
      -0.012216780334711075,
      0.016901491209864616,
      0.0005405952106229961,
      -0.02305823192000389,
      0.0054986258037388325,
      0.0027533420361578465,
      -0.0006208450649864972,
      0.021231625229120255,
      -0.048136480152606964,
      -0.009122292511165142,
      0.0059525915421545506,
      0.0384662039577961,
      -0.015687335282564163,
      0.04439730569720268,
      -0.023939302191138268,
      -0.02886039763689041,
      -0.02383185550570488,
      0.00431401701644063,
      -0.00788127351552248,
      -0.002152979141101241,
      -0.017965221777558327,
      0.013989663682878017,
      -0.003690821584314108,
      -0.0042952136136591434,
      0.0553569495677948,
      -0.0030891154892742634,
      0.012474654242396355,
      -0.008746226318180561,
      -0.03560810163617134,
      0.02383185550570488,
      0.01943725161254406,
      -0.047190941870212555,
      -0.01703042909502983,
      0.022907806560397148,
      0.012377951294183731,
      -0.011271242052316666,
      0.016374997794628143,
      -0.0028231830801814795,
      -0.005689344834536314,
      -0.02113492228090763,
      0.023788874968886375,
      -0.005452960263937712,
      0.013753279112279415,
      -0.005490567069500685,
      0.01422604825347662,
      -0.02589484676718712,
      0.0050607770681381226,
      0.008160637691617012,
      -0.03040764108300209,
      0.010637301951646805,
      0.02061917446553707,
      -0.0006386410677805543,
      0.03713385388255119,
      0.002052247291430831,
      -0.005834399256855249,
      -0.019856296479701996,
      -0.040787070989608765,
      0.011862203478813171,
      -0.008585055358707905,
      -0.009423145093023777,
      -0.0010697741527110338,
      0.003970184829086065,
      0.04413942992687225,
      -0.011185284703969955,
      -0.0027855762746185064,
      0.020490238443017006,
      0.007682496216148138,
      -0.02828018181025982,
      -0.02484186179935932,
      0.01135720033198595,
      -0.004244176205247641,
      0.04153920337557793,
      -0.01528977882117033,
      -0.03468405082821846,
      0.017535431310534477,
      0.041044943034648895,
      -0.04568667709827423,
      -0.0022711714264005423,
      0.031739991158246994,
      -0.013914451003074646,
      -0.005646366160362959,
      0.00532670971006155,
      -0.010282725095748901,
      0.01111007109284401,
      -0.0029064547270536423,
      0.0037015662528574467,
      -0.0036559011787176132,
      -0.038981951773166656,
      -0.0008965150336734951,
      -0.02989189326763153,
      0.003427575109526515,
      0.007284940220415592,
      -0.026432083919644356,
      -0.003851992776617408,
      -0.011217518709599972,
      0.039239827543497086,
      0.023466533049941063,
      0.033953409641981125,
      0.024992287158966064,
      0.034469157457351685,
      -0.015504674054682255,
      -0.03629576414823532,
      -0.006258816458284855,
      -0.019931510090827942,
      -0.00025115851894952357,
      0.008402394130825996,
      0.011754755862057209,
      -0.007252706214785576,
      -0.010787728242576122,
      0.029161250218749046,
      -0.014763286337256432,
      0.02937614545226097,
      0.036854490637779236,
      0.013205297291278839,
      0.006446850020438433,
      0.02391781285405159,
      0.013538384810090065,
      0.018018946051597595,
      -0.004770668689161539,
      0.027313154190778732,
      -0.016837023198604584,
      -0.029354656115174294,
      -0.014043387956917286,
      0.02656102180480957,
      -0.022349080070853233,
      0.03584448620676994,
      0.020286086946725845,
      0.00045665184734389186,
      0.017825540155172348,
      -0.0017137875547632575,
      -3.177256076014601e-05,
      0.020543960854411125,
      -0.015010415576398373,
      0.0069787148386240005,
      0.005947218742221594,
      0.0058129094541072845,
      -0.045729655772447586,
      0.004348937422037125,
      0.02561548352241516,
      -0.038659609854221344,
      -0.012291993945837021,
      -0.007478345651179552,
      -0.007537441793829203,
      0.0033335585612803698,
      -0.010997251607477665,
      -0.030042320489883423,
      0.0018601848278194666,
      -0.019426507875323296,
      -0.003355048131197691,
      0.0009240484796464443,
      -0.04964074492454529,
      0.004171648994088173,
      0.011303476989269257,
      -0.04959776625037193,
      -0.0339319184422493,
      0.006522063165903091,
      0.01573031395673752,
      -0.0032395420130342245,
      0.0415177121758461,
      -0.02153247781097889,
      0.027979327365756035,
      -0.03593044355511665,
      -0.0032825209200382233,
      -0.0062534441240131855,
      0.013925195671617985,
      -0.025250161066651344,
      -0.026947831735014915,
      -0.02064066380262375,
      0.028086775913834572,
      -0.023724406957626343,
      -0.027356132864952087,
      0.02851656638085842,
      -0.0010932782897725701,
      0.021328328177332878,
      0.0285380557179451,
      0.03468405082821846,
      -0.05415353924036026,
      0.04226984456181526,
      -0.01039554551243782,
      -0.027270175516605377,
      -0.0432368740439415,
      0.05303608253598213,
      -0.04487007483839989,
      0.018094157800078392,
      -0.018416501581668854,
      0.0130763603374362,
      -0.00482976483181119,
      0.005974080879241228,
      0.0027412541676312685,
      -0.030343173071742058,
      0.05780675262212753,
      -0.010615812614560127,
      0.022864827886223793,
      -0.004614870063960552,
      0.016525425016880035,
      -0.015461694449186325,
      -0.030880410224199295,
      -0.007139886263757944,
      -0.02675442583858967,
      0.012893700040876865,
      -0.012700294144451618,
      -0.001897791400551796,
      -0.0059149847365915775,
      0.027399111539125443,
      -0.002435028785839677,
      -0.01711638644337654,
      0.03453362360596657,
      -0.010379428043961525,
      0.0029682370368391275,
      0.05380970612168312,
      -0.014752541668713093,
      0.03193339705467224,
      -0.012657315470278263,
      0.004964074119925499,
      0.004899605643004179,
      0.0011382718803361058,
      0.014312006533145905,
      0.009681019000709057,
      -0.02383185550570488,
      -0.0018682433292269707,
      0.0018843604484573007,
      -0.024111218750476837,
      0.009600433520972729,
      -0.0058773779310286045,
      -0.005471763666719198,
      0.026453573256731033,
      0.021145667880773544,
      0.02518569305539131,
      -0.03100934810936451,
      -0.019856296479701996,
      0.015687335282564163,
      -0.03388893976807594,
      0.009745487943291664,
      0.049855638295412064,
      -0.004856626968830824,
      -0.00997649971395731,
      0.001833322923630476,
      -0.01682627759873867,
      0.0261527206748724,
      -0.002590827876701951,
      0.004639045801013708,
      -0.021844075992703438
    ],
    "embedding_model": "text-embedding-3-small",
    "embedding_generated_at": "2025-06-01T21:22:30.909958",
    "content_hash": "abcd3cbbc42176348a1390a8b48d9fe52fbf377ef5165a7584aad632ab18775d",
    "file_id": "a70bdd26768751c658c5a775cb4f8111236d420543ac0fb3508a51631f3d2558",
    "chunk_id": "0df631e2be0853f405b4986c1d9a2ab708e484c7cdb241861bdb39dedfcf1990",
    "prev_chunk_id": "936d4ef8c795551e690544bcd6f93913a46b885ed087b2129615f38c06f53f08",
    "next_chunk_id": "4420313bb3ea9c86e3a569ea8cb4f1a102e42ac8db139f2cb1039d8ea9ec5a31",
    "parent_heading_chunk_id": "ae404ad5d8e4e3740b6e837b68c6c24e88695bab45885f986483d7bbf719fd90",
    "total_chunks_in_file": 39
  },
  "meta": {
    "type": "chunk",
    "file": "/Users/cloudchase/Desktop/Vibe_Coding/Cursor/ai-content-developer/work/tmp/azure-aks-docs/articles/aks/use-kms-etcd-encryption.md",
    "section": [
      "Add Key Management Service etcd encryption to an Azure Kubernetes Service cluster",
      "Turn on KMS for a private key vault",
      "Rotate existing keys in a private key vault"
    ],
    "has_embedding": true,
    "embedding_updated_at": "2025-06-01T21:22:30.909962"
  },
  "timestamp": "2025-06-01T21:22:30.909967"
}